<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Data Transformation | PLSC 31101: Computational Tools for Social Science</title>
  <meta name="description" content="This book contains course notes and other materials for PLSC 31101." />
  <meta name="generator" content="bookdown 0.20.6 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Data Transformation | PLSC 31101: Computational Tools for Social Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://plsc-31101.github.io/course/" />
  
  <meta property="og:description" content="This book contains course notes and other materials for PLSC 31101." />
  <meta name="github-repo" content="plsc-31101/course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Data Transformation | PLSC 31101: Computational Tools for Social Science" />
  
  <meta name="twitter:description" content="This book contains course notes and other materials for PLSC 31101." />
  

<meta name="author" content="Rochelle Terman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-data.html"/>
<link rel="next" href="tidying-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PLSC 31101</a></li>

<li class="divider"></li>
<li class="part"><span><b>I Before Class</b></span></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a></li>
<li class="chapter" data-level="2" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>2</b> Syllabus</a><ul>
<li class="chapter" data-level="2.1" data-path="syllabus.html"><a href="syllabus.html#course-description"><i class="fa fa-check"></i><b>2.1</b> Course Description</a></li>
<li class="chapter" data-level="2.2" data-path="syllabus.html"><a href="syllabus.html#who-should-take-this-course"><i class="fa fa-check"></i><b>2.2</b> Who Should Take This Course</a></li>
<li class="chapter" data-level="2.3" data-path="syllabus.html"><a href="syllabus.html#requirements-and-evaluation"><i class="fa fa-check"></i><b>2.3</b> Requirements and Evaluation</a></li>
<li class="chapter" data-level="2.4" data-path="syllabus.html"><a href="syllabus.html#activities-and-materials"><i class="fa fa-check"></i><b>2.4</b> Activities and Materials</a></li>
<li class="chapter" data-level="2.5" data-path="syllabus.html"><a href="syllabus.html#curriculum-outlineschedule"><i class="fa fa-check"></i><b>2.5</b> Curriculum Outline/Schedule</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>3</b> Installation</a><ul>
<li class="chapter" data-level="3.1" data-path="installation.html"><a href="installation.html#r"><i class="fa fa-check"></i><b>3.1</b> R</a></li>
<li class="chapter" data-level="3.2" data-path="installation.html"><a href="installation.html#rstudio"><i class="fa fa-check"></i><b>3.2</b> RStudio</a></li>
<li class="chapter" data-level="3.3" data-path="installation.html"><a href="installation.html#r-packages"><i class="fa fa-check"></i><b>3.3</b> R Packages</a></li>
<li class="chapter" data-level="3.4" data-path="installation.html"><a href="installation.html#latex"><i class="fa fa-check"></i><b>3.4</b> LaTeX</a></li>
<li class="chapter" data-level="3.5" data-path="installation.html"><a href="installation.html#git"><i class="fa fa-check"></i><b>3.5</b> Git</a></li>
<li class="chapter" data-level="3.6" data-path="installation.html"><a href="installation.html#google-chrome"><i class="fa fa-check"></i><b>3.6</b> Google Chrome</a></li>
<li class="chapter" data-level="3.7" data-path="installation.html"><a href="installation.html#selector-gadget"><i class="fa fa-check"></i><b>3.7</b> Selector Gadget</a></li>
<li class="chapter" data-level="3.8" data-path="installation.html"><a href="installation.html#other-helpful-tools"><i class="fa fa-check"></i><b>3.8</b> Other Helpful Tools</a></li>
<li class="chapter" data-level="3.9" data-path="installation.html"><a href="installation.html#troubleshooting"><i class="fa fa-check"></i><b>3.9</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="homework-rubric.html"><a href="homework-rubric.html"><i class="fa fa-check"></i><b>4</b> Homework Rubric</a></li>
<li class="part"><span><b>II Course Notes</b></span></li>
<li class="chapter" data-level="5" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>5</b> Introduction</a><ul>
<li class="chapter" data-level="5.1" data-path="introduction.html"><a href="introduction.html#the-motivation"><i class="fa fa-check"></i><b>5.1</b> The Motivation</a></li>
<li class="chapter" data-level="5.2" data-path="introduction.html"><a href="introduction.html#about-this-class"><i class="fa fa-check"></i><b>5.2</b> About This Class</a></li>
<li class="chapter" data-level="5.3" data-path="introduction.html"><a href="introduction.html#learning-how-to-program"><i class="fa fa-check"></i><b>5.3</b> Learning How to Program</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>6</b> R Basics</a><ul>
<li class="chapter" data-level="6.1" data-path="r-basics.html"><a href="r-basics.html#what-is-r"><i class="fa fa-check"></i><b>6.1</b> What is R?</a></li>
<li class="chapter" data-level="6.2" data-path="r-basics.html"><a href="r-basics.html#rstudio-1"><i class="fa fa-check"></i><b>6.2</b> RStudio</a><ul>
<li class="chapter" data-level="6.2.1" data-path="r-basics.html"><a href="r-basics.html#console"><i class="fa fa-check"></i><b>6.2.1</b> Console</a></li>
<li class="chapter" data-level="6.2.2" data-path="r-basics.html"><a href="r-basics.html#scripts"><i class="fa fa-check"></i><b>6.2.2</b> Scripts</a></li>
<li class="chapter" data-level="6.2.3" data-path="r-basics.html"><a href="r-basics.html#running-code"><i class="fa fa-check"></i><b>6.2.3</b> Running Code</a></li>
<li class="chapter" data-level="6.2.4" data-path="r-basics.html"><a href="r-basics.html#comments"><i class="fa fa-check"></i><b>6.2.4</b> Comments</a></li>
<li class="chapter" data-level="6.2.5" data-path="r-basics.html"><a href="r-basics.html#diagnostics-and-errors"><i class="fa fa-check"></i><b>6.2.5</b> Diagnostics and errors</a></li>
<li class="chapter" data-level="6.2.6" data-path="r-basics.html"><a href="r-basics.html#errors-messages-and-warnings"><i class="fa fa-check"></i><b>6.2.6</b> Errors, Messages, and Warnings</a></li>
<li class="chapter" data-level="6.2.7" data-path="r-basics.html"><a href="r-basics.html#r-environment"><i class="fa fa-check"></i><b>6.2.7</b> R Environment</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="r-basics.html"><a href="r-basics.html#r-packages-1"><i class="fa fa-check"></i><b>6.3</b> R Packages</a><ul>
<li class="chapter" data-level="6.3.1" data-path="r-basics.html"><a href="r-basics.html#installing-packages"><i class="fa fa-check"></i><b>6.3.1</b> Installing Packages</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-basics.html"><a href="r-basics.html#loading-packages"><i class="fa fa-check"></i><b>6.3.2</b> Loading Packages</a></li>
<li class="chapter" data-level="6.3.3" data-path="r-basics.html"><a href="r-basics.html#challenge"><i class="fa fa-check"></i><b>6.3.3</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="r-basics.html"><a href="r-basics.html#r-markdown"><i class="fa fa-check"></i><b>6.4</b> R Markdown</a><ul>
<li class="chapter" data-level="6.4.1" data-path="r-basics.html"><a href="r-basics.html#yaml-header"><i class="fa fa-check"></i><b>6.4.1</b> YAML Header</a></li>
<li class="chapter" data-level="6.4.2" data-path="r-basics.html"><a href="r-basics.html#markdown"><i class="fa fa-check"></i><b>6.4.2</b> Markdown</a></li>
<li class="chapter" data-level="6.4.3" data-path="r-basics.html"><a href="r-basics.html#code-chunks"><i class="fa fa-check"></i><b>6.4.3</b> Code Chunks</a></li>
<li class="chapter" data-level="6.4.4" data-path="r-basics.html"><a href="r-basics.html#knitting"><i class="fa fa-check"></i><b>6.4.4</b> Knitting</a></li>
<li class="chapter" data-level="6.4.5" data-path="r-basics.html"><a href="r-basics.html#r-chunk-options-for-knitting"><i class="fa fa-check"></i><b>6.4.5</b> R Chunk Options for Knitting</a></li>
<li class="chapter" data-level="6.4.6" data-path="r-basics.html"><a href="r-basics.html#cheatsheets-and-other-resources"><i class="fa fa-check"></i><b>6.4.6</b> Cheatsheets and Other Resources</a></li>
<li class="chapter" data-level="6.4.7" data-path="r-basics.html"><a href="r-basics.html#challenges"><i class="fa fa-check"></i><b>6.4.7</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-syntax.html"><a href="r-syntax.html"><i class="fa fa-check"></i><b>7</b> R Syntax</a><ul>
<li class="chapter" data-level="7.1" data-path="r-syntax.html"><a href="r-syntax.html#variables"><i class="fa fa-check"></i><b>7.1</b> Variables</a><ul>
<li class="chapter" data-level="7.1.1" data-path="r-syntax.html"><a href="r-syntax.html#arithmetic-operators"><i class="fa fa-check"></i><b>7.1.1</b> Arithmetic operators</a></li>
<li class="chapter" data-level="7.1.2" data-path="r-syntax.html"><a href="r-syntax.html#assigning-variables"><i class="fa fa-check"></i><b>7.1.2</b> Assigning Variables</a></li>
<li class="chapter" data-level="7.1.3" data-path="r-syntax.html"><a href="r-syntax.html#variable-names"><i class="fa fa-check"></i><b>7.1.3</b> Variable Names</a></li>
<li class="chapter" data-level="7.1.4" data-path="r-syntax.html"><a href="r-syntax.html#challenges-1"><i class="fa fa-check"></i><b>7.1.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="r-syntax.html"><a href="r-syntax.html#functions"><i class="fa fa-check"></i><b>7.2</b> Functions</a><ul>
<li class="chapter" data-level="7.2.1" data-path="r-syntax.html"><a href="r-syntax.html#arguments"><i class="fa fa-check"></i><b>7.2.1</b> Arguments</a></li>
<li class="chapter" data-level="7.2.2" data-path="r-syntax.html"><a href="r-syntax.html#store-function-output"><i class="fa fa-check"></i><b>7.2.2</b> Store Function Output</a></li>
<li class="chapter" data-level="7.2.3" data-path="r-syntax.html"><a href="r-syntax.html#argument-restrictions-and-defaults"><i class="fa fa-check"></i><b>7.2.3</b> Argument Restrictions and Defaults</a></li>
<li class="chapter" data-level="7.2.4" data-path="r-syntax.html"><a href="r-syntax.html#documentation-and-help-files"><i class="fa fa-check"></i><b>7.2.4</b> Documentation and Help Files</a></li>
<li class="chapter" data-level="7.2.5" data-path="r-syntax.html"><a href="r-syntax.html#challenges-2"><i class="fa fa-check"></i><b>7.2.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="r-syntax.html"><a href="r-syntax.html#data-types"><i class="fa fa-check"></i><b>7.3</b> Data Types</a><ul>
<li class="chapter" data-level="7.3.1" data-path="r-syntax.html"><a href="r-syntax.html#what-is-that-type"><i class="fa fa-check"></i><b>7.3.1</b> What Is that Type?</a></li>
<li class="chapter" data-level="7.3.2" data-path="r-syntax.html"><a href="r-syntax.html#coercion"><i class="fa fa-check"></i><b>7.3.2</b> Coercion</a></li>
<li class="chapter" data-level="7.3.3" data-path="r-syntax.html"><a href="r-syntax.html#other-objects"><i class="fa fa-check"></i><b>7.3.3</b> Other Objects</a></li>
<li class="chapter" data-level="7.3.4" data-path="r-syntax.html"><a href="r-syntax.html#challenges-3"><i class="fa fa-check"></i><b>7.3.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="r-syntax.html"><a href="r-syntax.html#boolean-expressions"><i class="fa fa-check"></i><b>7.4</b> Boolean Expressions</a><ul>
<li class="chapter" data-level="7.4.1" data-path="r-syntax.html"><a href="r-syntax.html#boolean-operators"><i class="fa fa-check"></i><b>7.4.1</b> Boolean Operators</a></li>
<li class="chapter" data-level="7.4.2" data-path="r-syntax.html"><a href="r-syntax.html#logical-operators"><i class="fa fa-check"></i><b>7.4.2</b> Logical Operators</a></li>
<li class="chapter" data-level="7.4.3" data-path="r-syntax.html"><a href="r-syntax.html#boolean-vectors"><i class="fa fa-check"></i><b>7.4.3</b> Boolean Vectors</a></li>
<li class="chapter" data-level="7.4.4" data-path="r-syntax.html"><a href="r-syntax.html#boolean-vectors-in-action"><i class="fa fa-check"></i><b>7.4.4</b> Boolean Vectors in Action</a></li>
<li class="chapter" data-level="7.4.5" data-path="r-syntax.html"><a href="r-syntax.html#challenges-4"><i class="fa fa-check"></i><b>7.4.5</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>8</b> Working with Data</a><ul>
<li class="chapter" data-level="8.1" data-path="working-with-data.html"><a href="working-with-data.html#project-workflow"><i class="fa fa-check"></i><b>8.1</b> Project Workflow</a><ul>
<li class="chapter" data-level="8.1.1" data-path="working-with-data.html"><a href="working-with-data.html#store-analyses-in-scripts-not-workspaces"><i class="fa fa-check"></i><b>8.1.1</b> Store Analyses in Scripts, Not Workspaces</a></li>
<li class="chapter" data-level="8.1.2" data-path="working-with-data.html"><a href="working-with-data.html#working-directories-and-paths"><i class="fa fa-check"></i><b>8.1.2</b> Working Directories and Paths</a></li>
<li class="chapter" data-level="8.1.3" data-path="working-with-data.html"><a href="working-with-data.html#r-projects"><i class="fa fa-check"></i><b>8.1.3</b> R Projects</a></li>
<li class="chapter" data-level="8.1.4" data-path="working-with-data.html"><a href="working-with-data.html#file-organization"><i class="fa fa-check"></i><b>8.1.4</b> File Organization</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="working-with-data.html"><a href="working-with-data.html#importing-and-exporting"><i class="fa fa-check"></i><b>8.2</b> Importing and Exporting</a><ul>
<li class="chapter" data-level="8.2.1" data-path="working-with-data.html"><a href="working-with-data.html#where-is-my-data"><i class="fa fa-check"></i><b>8.2.1</b> Where Is My Data?</a></li>
<li class="chapter" data-level="8.2.2" data-path="working-with-data.html"><a href="working-with-data.html#data-storage"><i class="fa fa-check"></i><b>8.2.2</b> Data Storage</a></li>
<li class="chapter" data-level="8.2.3" data-path="working-with-data.html"><a href="working-with-data.html#importing-data"><i class="fa fa-check"></i><b>8.2.3</b> Importing Data</a></li>
<li class="chapter" data-level="8.2.4" data-path="working-with-data.html"><a href="working-with-data.html#exporting-data"><i class="fa fa-check"></i><b>8.2.4</b> Exporting Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>9</b> Data Transformation</a><ul>
<li class="chapter" data-level="9.1" data-path="data-transformation.html"><a href="data-transformation.html#introduction-to-data"><i class="fa fa-check"></i><b>9.1</b> Introduction to Data</a><ul>
<li class="chapter" data-level="9.1.1" data-path="data-transformation.html"><a href="data-transformation.html#the-gapminder-dataset"><i class="fa fa-check"></i><b>9.1.1</b> The Gapminder Dataset</a></li>
<li class="chapter" data-level="9.1.2" data-path="data-transformation.html"><a href="data-transformation.html#structure-and-dimensions"><i class="fa fa-check"></i><b>9.1.2</b> Structure and Dimensions</a></li>
<li class="chapter" data-level="9.1.3" data-path="data-transformation.html"><a href="data-transformation.html#variables-1"><i class="fa fa-check"></i><b>9.1.3</b> Variables</a></li>
<li class="chapter" data-level="9.1.4" data-path="data-transformation.html"><a href="data-transformation.html#challenges-5"><i class="fa fa-check"></i><b>9.1.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="data-transformation.html"><a href="data-transformation.html#introduction-to-dplyr"><i class="fa fa-check"></i><b>9.2</b> Introduction to <code>dplyr</code></a><ul>
<li class="chapter" data-level="9.2.1" data-path="data-transformation.html"><a href="data-transformation.html#tidyverse"><i class="fa fa-check"></i><b>9.2.1</b> <code>tidyverse</code></a></li>
<li class="chapter" data-level="9.2.2" data-path="data-transformation.html"><a href="data-transformation.html#why-dplyr"><i class="fa fa-check"></i><b>9.2.2</b> Why <code>dplyr</code>?</a></li>
<li class="chapter" data-level="9.2.3" data-path="data-transformation.html"><a href="data-transformation.html#select-columns-with-select"><i class="fa fa-check"></i><b>9.2.3</b> Select Columns with <code>select</code></a></li>
<li class="chapter" data-level="9.2.4" data-path="data-transformation.html"><a href="data-transformation.html#the-pipe"><i class="fa fa-check"></i><b>9.2.4</b> The Pipe</a></li>
<li class="chapter" data-level="9.2.5" data-path="data-transformation.html"><a href="data-transformation.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>9.2.5</b> Filter Rows with <code>filter</code></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="data-transformation.html"><a href="data-transformation.html#more-dplyr-functions"><i class="fa fa-check"></i><b>9.3</b> More <code>dplyr</code> functions</a><ul>
<li class="chapter" data-level="9.3.1" data-path="data-transformation.html"><a href="data-transformation.html#use-mutate-to-add-new-variables"><i class="fa fa-check"></i><b>9.3.1</b> Use <code>mutate()</code> to Add New Variables</a></li>
<li class="chapter" data-level="9.3.2" data-path="data-transformation.html"><a href="data-transformation.html#use-arrange-to-row-order-data-in-a-principled-way"><i class="fa fa-check"></i><b>9.3.2</b> Use <code>arrange()</code> to Row-order Data in a Principled Way</a></li>
<li class="chapter" data-level="9.3.3" data-path="data-transformation.html"><a href="data-transformation.html#use-rename-to-rename-variables"><i class="fa fa-check"></i><b>9.3.3</b> Use <code>rename()</code> to Rename Variables</a></li>
<li class="chapter" data-level="9.3.4" data-path="data-transformation.html"><a href="data-transformation.html#use-select-to-rename-and-reposition-variables"><i class="fa fa-check"></i><b>9.3.4</b> Use <code>select()</code> to Rename and Reposition Variables</a></li>
<li class="chapter" data-level="9.3.5" data-path="data-transformation.html"><a href="data-transformation.html#use-count-to-count-variable-quantities"><i class="fa fa-check"></i><b>9.3.5</b> Use <code>count()</code> to Count Variable Quantities</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="data-transformation.html"><a href="data-transformation.html#calculating-across-groups"><i class="fa fa-check"></i><b>9.4</b> Calculating across Groups</a><ul>
<li class="chapter" data-level="9.4.1" data-path="data-transformation.html"><a href="data-transformation.html#use-group_by-to-create-a-grouped-data"><i class="fa fa-check"></i><b>9.4.1</b> Use <code>group_by</code> to Create a Grouped Data</a></li>
<li class="chapter" data-level="9.4.2" data-path="data-transformation.html"><a href="data-transformation.html#summarize-across-groups-with-summarize"><i class="fa fa-check"></i><b>9.4.2</b> Summarize Across Groups with <code>summarize</code></a></li>
<li class="chapter" data-level="9.4.3" data-path="data-transformation.html"><a href="data-transformation.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>9.4.3</b> Add New Variables with <code>mutate</code></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="data-transformation.html"><a href="data-transformation.html#challenges-6"><i class="fa fa-check"></i><b>9.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tidying-data.html"><a href="tidying-data.html"><i class="fa fa-check"></i><b>10</b> Tidying Data</a><ul>
<li class="chapter" data-level="10.1" data-path="tidying-data.html"><a href="tidying-data.html#wide-vs.-long-formats"><i class="fa fa-check"></i><b>10.1</b> Wide vs. Long Formats</a></li>
<li class="chapter" data-level="10.2" data-path="tidying-data.html"><a href="tidying-data.html#tidying-the-gapminder-data"><i class="fa fa-check"></i><b>10.2</b> Tidying the Gapminder Data</a></li>
<li class="chapter" data-level="10.3" data-path="tidying-data.html"><a href="tidying-data.html#tidyr-functions"><i class="fa fa-check"></i><b>10.3</b> <code>tidyr</code> Functions</a><ul>
<li class="chapter" data-level="10.3.1" data-path="tidying-data.html"><a href="tidying-data.html#gather"><i class="fa fa-check"></i><b>10.3.1</b> <code>gather</code></a></li>
<li class="chapter" data-level="10.3.2" data-path="tidying-data.html"><a href="tidying-data.html#separate"><i class="fa fa-check"></i><b>10.3.2</b> <code>separate</code></a></li>
<li class="chapter" data-level="10.3.3" data-path="tidying-data.html"><a href="tidying-data.html#spread"><i class="fa fa-check"></i><b>10.3.3</b> <code>spread</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tidying-data.html"><a href="tidying-data.html#dealing-with-missing-data"><i class="fa fa-check"></i><b>10.4</b> Dealing with Missing Data</a><ul>
<li class="chapter" data-level="10.4.1" data-path="tidying-data.html"><a href="tidying-data.html#na_if"><i class="fa fa-check"></i><b>10.4.1</b> <code>na_if</code></a></li>
<li class="chapter" data-level="10.4.2" data-path="tidying-data.html"><a href="tidying-data.html#replace-na-values-with-replace_na"><i class="fa fa-check"></i><b>10.4.2</b> Replace <code>NA</code> values with <code>replace_na</code></a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="tidying-data.html"><a href="tidying-data.html#more-tidyverse"><i class="fa fa-check"></i><b>10.5</b> More <code>tidyverse</code></a></li>
<li class="chapter" data-level="10.6" data-path="tidying-data.html"><a href="tidying-data.html#challenges-7"><i class="fa fa-check"></i><b>10.6</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>11</b> Relational Data</a><ul>
<li class="chapter" data-level="11.1" data-path="relational-data.html"><a href="relational-data.html#why-relational-data"><i class="fa fa-check"></i><b>11.1</b> Why Relational Data</a></li>
<li class="chapter" data-level="11.2" data-path="relational-data.html"><a href="relational-data.html#keys"><i class="fa fa-check"></i><b>11.2</b> Keys</a></li>
<li class="chapter" data-level="11.3" data-path="relational-data.html"><a href="relational-data.html#joins"><i class="fa fa-check"></i><b>11.3</b> Joins</a></li>
<li class="chapter" data-level="11.4" data-path="relational-data.html"><a href="relational-data.html#defining-keys"><i class="fa fa-check"></i><b>11.4</b> Defining Keys</a></li>
<li class="chapter" data-level="11.5" data-path="relational-data.html"><a href="relational-data.html#duplicate-keys"><i class="fa fa-check"></i><b>11.5</b> Duplicate Keys</a></li>
<li class="chapter" data-level="11.6" data-path="relational-data.html"><a href="relational-data.html#challenges-8"><i class="fa fa-check"></i><b>11.6</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>12</b> Plotting</a><ul>
<li class="chapter" data-level="12.1" data-path="plotting.html"><a href="plotting.html#the-dataset"><i class="fa fa-check"></i><b>12.1</b> The Dataset</a></li>
<li class="chapter" data-level="12.2" data-path="plotting.html"><a href="plotting.html#r-base-graphics"><i class="fa fa-check"></i><b>12.2</b> R Base Graphics</a><ul>
<li class="chapter" data-level="12.2.1" data-path="plotting.html"><a href="plotting.html#scatter-and-line-plots"><i class="fa fa-check"></i><b>12.2.1</b> Scatter and Line Plots</a></li>
<li class="chapter" data-level="12.2.2" data-path="plotting.html"><a href="plotting.html#histograms-and-density-plots"><i class="fa fa-check"></i><b>12.2.2</b> Histograms and Density Plots</a></li>
<li class="chapter" data-level="12.2.3" data-path="plotting.html"><a href="plotting.html#labels"><i class="fa fa-check"></i><b>12.2.3</b> Labels</a></li>
<li class="chapter" data-level="12.2.4" data-path="plotting.html"><a href="plotting.html#axis-and-size-scaling"><i class="fa fa-check"></i><b>12.2.4</b> Axis and Size Scaling</a></li>
<li class="chapter" data-level="12.2.5" data-path="plotting.html"><a href="plotting.html#graphical-parameters"><i class="fa fa-check"></i><b>12.2.5</b> Graphical Parameters</a></li>
<li class="chapter" data-level="12.2.6" data-path="plotting.html"><a href="plotting.html#annotations-reference-lines-and-legends"><i class="fa fa-check"></i><b>12.2.6</b> Annotations, Reference Lines, and Legends</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="plotting.html"><a href="plotting.html#ggplot2"><i class="fa fa-check"></i><b>12.3</b> ggplot2</a><ul>
<li class="chapter" data-level="12.3.1" data-path="plotting.html"><a href="plotting.html#grammar"><i class="fa fa-check"></i><b>12.3.1</b> Grammar</a></li>
<li class="chapter" data-level="12.3.2" data-path="plotting.html"><a href="plotting.html#anatomy-of-aes"><i class="fa fa-check"></i><b>12.3.2</b> Anatomy of <code>aes</code></a></li>
<li class="chapter" data-level="12.3.3" data-path="plotting.html"><a href="plotting.html#layers"><i class="fa fa-check"></i><b>12.3.3</b> Layers</a></li>
<li class="chapter" data-level="12.3.4" data-path="plotting.html"><a href="plotting.html#labels-1"><i class="fa fa-check"></i><b>12.3.4</b> Labels</a></li>
<li class="chapter" data-level="12.3.5" data-path="plotting.html"><a href="plotting.html#transformations-and-stats"><i class="fa fa-check"></i><b>12.3.5</b> Transformations and Stats</a></li>
<li class="chapter" data-level="12.3.6" data-path="plotting.html"><a href="plotting.html#facets"><i class="fa fa-check"></i><b>12.3.6</b> Facets</a></li>
<li class="chapter" data-level="12.3.7" data-path="plotting.html"><a href="plotting.html#legend-and-scale-manipulations"><i class="fa fa-check"></i><b>12.3.7</b> Legend and Scale Manipulations</a></li>
<li class="chapter" data-level="12.3.8" data-path="plotting.html"><a href="plotting.html#putting-everything-together"><i class="fa fa-check"></i><b>12.3.8</b> Putting Everything Together</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="plotting.html"><a href="plotting.html#saving-plots"><i class="fa fa-check"></i><b>12.4</b> Saving Plots</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="statistical-inferences.html"><a href="statistical-inferences.html"><i class="fa fa-check"></i><b>13</b> Statistical Inferences</a><ul>
<li class="chapter" data-level="13.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#statistical-distributions"><i class="fa fa-check"></i><b>13.1</b> Statistical Distributions</a><ul>
<li class="chapter" data-level="13.1.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#sampling-and-simulation"><i class="fa fa-check"></i><b>13.1.1</b> Sampling and Simulation</a></li>
<li class="chapter" data-level="13.1.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#random-seeds"><i class="fa fa-check"></i><b>13.1.2</b> Random Seeds</a></li>
<li class="chapter" data-level="13.1.3" data-path="statistical-inferences.html"><a href="statistical-inferences.html#challenges-9"><i class="fa fa-check"></i><b>13.1.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#inferences-and-regressions"><i class="fa fa-check"></i><b>13.2</b> Inferences and Regressions</a><ul>
<li class="chapter" data-level="13.2.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#statistical-tests"><i class="fa fa-check"></i><b>13.2.1</b> Statistical Tests</a></li>
<li class="chapter" data-level="13.2.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#regressions-and-linear-models"><i class="fa fa-check"></i><b>13.2.2</b> Regressions and Linear Models</a></li>
<li class="chapter" data-level="13.2.3" data-path="statistical-inferences.html"><a href="statistical-inferences.html#regression-output"><i class="fa fa-check"></i><b>13.2.3</b> Regression Output</a></li>
<li class="chapter" data-level="13.2.4" data-path="statistical-inferences.html"><a href="statistical-inferences.html#tidying-model-data-with-broom"><i class="fa fa-check"></i><b>13.2.4</b> Tidying model data with <code>broom</code></a></li>
<li class="chapter" data-level="13.2.5" data-path="statistical-inferences.html"><a href="statistical-inferences.html#formatting-regression-tables"><i class="fa fa-check"></i><b>13.2.5</b> Formatting Regression Tables</a></li>
<li class="chapter" data-level="13.2.6" data-path="statistical-inferences.html"><a href="statistical-inferences.html#challenges-10"><i class="fa fa-check"></i><b>13.2.6</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html"><i class="fa fa-check"></i><b>14</b> Data Classes and Structures</a><ul>
<li class="chapter" data-level="14.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#vectors"><i class="fa fa-check"></i><b>14.1</b> Vectors</a><ul>
<li class="chapter" data-level="14.1.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-vectors"><i class="fa fa-check"></i><b>14.1.1</b> Creating Vectors</a></li>
<li class="chapter" data-level="14.1.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#vectors-are-everywhere"><i class="fa fa-check"></i><b>14.1.2</b> Vectors Are Everywhere</a></li>
<li class="chapter" data-level="14.1.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#recycling"><i class="fa fa-check"></i><b>14.1.3</b> Recycling</a></li>
<li class="chapter" data-level="14.1.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#types-of-vectors"><i class="fa fa-check"></i><b>14.1.4</b> Types of Vectors</a></li>
<li class="chapter" data-level="14.1.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#coercion-1"><i class="fa fa-check"></i><b>14.1.5</b> Coercion</a></li>
<li class="chapter" data-level="14.1.6" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-a-vector"><i class="fa fa-check"></i><b>14.1.6</b> Naming a Vector</a></li>
<li class="chapter" data-level="14.1.7" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-11"><i class="fa fa-check"></i><b>14.1.7</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#subsetting-vectors"><i class="fa fa-check"></i><b>14.2</b> Subsetting Vectors</a><ul>
<li class="chapter" data-level="14.2.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#subsetting-types"><i class="fa fa-check"></i><b>14.2.1</b> Subsetting Types</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#factors"><i class="fa fa-check"></i><b>14.3</b> Factors</a><ul>
<li class="chapter" data-level="14.3.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-factors"><i class="fa fa-check"></i><b>14.3.1</b> Creating Factors</a></li>
<li class="chapter" data-level="14.3.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#summarizing-a-factor"><i class="fa fa-check"></i><b>14.3.2</b> Summarizing a Factor</a></li>
<li class="chapter" data-level="14.3.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#changing-factor-levels"><i class="fa fa-check"></i><b>14.3.3</b> Changing Factor Levels</a></li>
<li class="chapter" data-level="14.3.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#factors-are-integers"><i class="fa fa-check"></i><b>14.3.4</b> Factors Are Integers</a></li>
<li class="chapter" data-level="14.3.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-12"><i class="fa fa-check"></i><b>14.3.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#lists"><i class="fa fa-check"></i><b>14.4</b> Lists</a><ul>
<li class="chapter" data-level="14.4.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-lists"><i class="fa fa-check"></i><b>14.4.1</b> Creating Lists</a></li>
<li class="chapter" data-level="14.4.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-lists"><i class="fa fa-check"></i><b>14.4.2</b> Naming Lists</a></li>
<li class="chapter" data-level="14.4.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#list-structure"><i class="fa fa-check"></i><b>14.4.3</b> List Structure</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#subsetting-lists"><i class="fa fa-check"></i><b>14.5</b> Subsetting Lists</a><ul>
<li class="chapter" data-level="14.5.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#with"><i class="fa fa-check"></i><b>14.5.1</b> With <code>[</code></a></li>
<li class="chapter" data-level="14.5.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#with-1"><i class="fa fa-check"></i><b>14.5.2</b> With <code>[[</code></a></li>
<li class="chapter" data-level="14.5.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#with-2"><i class="fa fa-check"></i><b>14.5.3</b> with <code>$</code></a></li>
<li class="chapter" data-level="14.5.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-13"><i class="fa fa-check"></i><b>14.5.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrices"><i class="fa fa-check"></i><b>14.6</b> Matrices</a></li>
<li class="chapter" data-level="14.7" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#indexing-a-matrix"><i class="fa fa-check"></i><b>14.7</b> Indexing a Matrix</a></li>
<li class="chapter" data-level="14.8" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#dataframes"><i class="fa fa-check"></i><b>14.8</b> Dataframes</a><ul>
<li class="chapter" data-level="14.8.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-dataframes"><i class="fa fa-check"></i><b>14.8.1</b> Creating Dataframes</a></li>
<li class="chapter" data-level="14.8.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#the-structure-of-dataframes"><i class="fa fa-check"></i><b>14.8.2</b> The Structure of Dataframes</a></li>
<li class="chapter" data-level="14.8.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-dataframes"><i class="fa fa-check"></i><b>14.8.3</b> Naming Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="14.9" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#indexing-dataframes"><i class="fa fa-check"></i><b>14.9</b> Indexing Dataframes</a><ul>
<li class="chapter" data-level="14.9.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-14"><i class="fa fa-check"></i><b>14.9.1</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html"><i class="fa fa-check"></i><b>15</b> Strings and Regular Expressions</a><ul>
<li class="chapter" data-level="15.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#string-basics"><i class="fa fa-check"></i><b>15.1</b> String Basics</a><ul>
<li class="chapter" data-level="15.1.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#creating-strings"><i class="fa fa-check"></i><b>15.1.1</b> Creating Strings</a></li>
<li class="chapter" data-level="15.1.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-and-special-characters"><i class="fa fa-check"></i><b>15.1.2</b> Escape and Special Characters</a></li>
<li class="chapter" data-level="15.1.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#string-length"><i class="fa fa-check"></i><b>15.1.3</b> String Length</a></li>
<li class="chapter" data-level="15.1.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#combining-strings"><i class="fa fa-check"></i><b>15.1.4</b> Combining Strings</a></li>
<li class="chapter" data-level="15.1.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#subsetting-strings"><i class="fa fa-check"></i><b>15.1.5</b> Subsetting Strings</a></li>
<li class="chapter" data-level="15.1.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#locales"><i class="fa fa-check"></i><b>15.1.6</b> Locales</a></li>
<li class="chapter" data-level="15.1.7" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#challenges-15"><i class="fa fa-check"></i><b>15.1.7</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regular-expressions"><i class="fa fa-check"></i><b>15.2</b> Regular Expressions</a><ul>
<li class="chapter" data-level="15.2.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#basic-matches"><i class="fa fa-check"></i><b>15.2.1</b> Basic Matches</a></li>
<li class="chapter" data-level="15.2.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-characters"><i class="fa fa-check"></i><b>15.2.2</b> Escape Characters</a></li>
<li class="chapter" data-level="15.2.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#anchors"><i class="fa fa-check"></i><b>15.2.3</b> Anchors</a></li>
<li class="chapter" data-level="15.2.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-classes-and-alternatives"><i class="fa fa-check"></i><b>15.2.4</b> Character Classes and Alternatives</a></li>
<li class="chapter" data-level="15.2.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#repetition"><i class="fa fa-check"></i><b>15.2.5</b> Repetition</a></li>
<li class="chapter" data-level="15.2.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regex-resources"><i class="fa fa-check"></i><b>15.2.6</b> Regex Resources</a></li>
<li class="chapter" data-level="15.2.7" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#challenges-16"><i class="fa fa-check"></i><b>15.2.7</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#common-tools"><i class="fa fa-check"></i><b>15.3</b> Common Tools</a><ul>
<li class="chapter" data-level="15.3.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#detect-matches"><i class="fa fa-check"></i><b>15.3.1</b> Detect Matches</a></li>
<li class="chapter" data-level="15.3.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#extract-matches"><i class="fa fa-check"></i><b>15.3.2</b> Extract Matches</a></li>
<li class="chapter" data-level="15.3.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#replacing-matches"><i class="fa fa-check"></i><b>15.3.3</b> Replacing Matches</a></li>
<li class="chapter" data-level="15.3.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#splitting"><i class="fa fa-check"></i><b>15.3.4</b> Splitting</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#other-types-of-patterns"><i class="fa fa-check"></i><b>15.4</b> Other Types of Patterns</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="programming-in-r.html"><a href="programming-in-r.html"><i class="fa fa-check"></i><b>16</b> Programming in R</a><ul>
<li class="chapter" data-level="16.1" data-path="programming-in-r.html"><a href="programming-in-r.html#conditional-flow"><i class="fa fa-check"></i><b>16.1</b> Conditional Flow</a><ul>
<li class="chapter" data-level="16.1.1" data-path="programming-in-r.html"><a href="programming-in-r.html#multiple-conditions"><i class="fa fa-check"></i><b>16.1.1</b> Multiple Conditions</a></li>
<li class="chapter" data-level="16.1.2" data-path="programming-in-r.html"><a href="programming-in-r.html#complex-statements"><i class="fa fa-check"></i><b>16.1.2</b> Complex Statements</a></li>
<li class="chapter" data-level="16.1.3" data-path="programming-in-r.html"><a href="programming-in-r.html#code-style"><i class="fa fa-check"></i><b>16.1.3</b> Code Style</a></li>
<li class="chapter" data-level="16.1.4" data-path="programming-in-r.html"><a href="programming-in-r.html#if-vs.-if_else"><i class="fa fa-check"></i><b>16.1.4</b> <code>if</code> vs. <code>if_else</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="programming-in-r.html"><a href="programming-in-r.html#functions-1"><i class="fa fa-check"></i><b>16.2</b> Functions</a><ul>
<li class="chapter" data-level="16.2.1" data-path="programming-in-r.html"><a href="programming-in-r.html#why-write-functions"><i class="fa fa-check"></i><b>16.2.1</b> Why Write Functions?</a></li>
<li class="chapter" data-level="16.2.2" data-path="programming-in-r.html"><a href="programming-in-r.html#anatomy-of-a-function"><i class="fa fa-check"></i><b>16.2.2</b> Anatomy of a Function</a></li>
<li class="chapter" data-level="16.2.3" data-path="programming-in-r.html"><a href="programming-in-r.html#writing-a-function"><i class="fa fa-check"></i><b>16.2.3</b> Writing a Function</a></li>
<li class="chapter" data-level="16.2.4" data-path="programming-in-r.html"><a href="programming-in-r.html#using-a-function"><i class="fa fa-check"></i><b>16.2.4</b> Using a Function</a></li>
<li class="chapter" data-level="16.2.5" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-17"><i class="fa fa-check"></i><b>16.2.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="programming-in-r.html"><a href="programming-in-r.html#iteration"><i class="fa fa-check"></i><b>16.3</b> Iteration</a><ul>
<li class="chapter" data-level="16.3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#vectorized-functions"><i class="fa fa-check"></i><b>16.3.1</b> Vectorized Functions</a></li>
<li class="chapter" data-level="16.3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#functional-programming-and-map"><i class="fa fa-check"></i><b>16.3.2</b> Functional Programming and <code>map</code></a></li>
<li class="chapter" data-level="16.3.3" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-18"><i class="fa fa-check"></i><b>16.3.3</b> Challenges</a></li>
<li class="chapter" data-level="16.3.4" data-path="programming-in-r.html"><a href="programming-in-r.html#scoped-verbs"><i class="fa fa-check"></i><b>16.3.4</b> Scoped Verbs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html"><i class="fa fa-check"></i><b>17</b> Collecting Data from the Web</a><ul>
<li class="chapter" data-level="17.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#introduction-1"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#web-apis"><i class="fa fa-check"></i><b>17.2</b> Web APIs</a><ul>
<li class="chapter" data-level="17.2.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#some-basic-terminology"><i class="fa fa-check"></i><b>17.2.1</b> Some Basic Terminology</a></li>
<li class="chapter" data-level="17.2.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#how-do-get-requests-work"><i class="fa fa-check"></i><b>17.2.2</b> How Do GET Requests Work?</a></li>
<li class="chapter" data-level="17.2.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#finding-apis"><i class="fa fa-check"></i><b>17.2.3</b> Finding APIs</a></li>
<li class="chapter" data-level="17.2.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#getting-api-access"><i class="fa fa-check"></i><b>17.2.4</b> Getting API Access</a></li>
<li class="chapter" data-level="17.2.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#using-apis-in-r"><i class="fa fa-check"></i><b>17.2.5</b> Using APIs in R</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#writing-api-queries"><i class="fa fa-check"></i><b>17.3</b> Writing API Queries</a><ul>
<li class="chapter" data-level="17.3.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#constructing-the-api-get-request"><i class="fa fa-check"></i><b>17.3.1</b> Constructing the API GET Request</a></li>
<li class="chapter" data-level="17.3.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#parsing-the-response"><i class="fa fa-check"></i><b>17.3.2</b> Parsing the Response</a></li>
<li class="chapter" data-level="17.3.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#iteration-through-results-pager"><i class="fa fa-check"></i><b>17.3.3</b> Iteration through Results Pager</a></li>
<li class="chapter" data-level="17.3.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#visualizing-results"><i class="fa fa-check"></i><b>17.3.4</b> Visualizing Results</a></li>
<li class="chapter" data-level="17.3.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#more-resources"><i class="fa fa-check"></i><b>17.3.5</b> More Resources</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#webscraping"><i class="fa fa-check"></i><b>17.4</b> Webscraping</a><ul>
<li class="chapter" data-level="17.4.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#what-is-a-website"><i class="fa fa-check"></i><b>17.4.1</b> What Is a Website?</a></li>
<li class="chapter" data-level="17.4.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#websites-return-html"><i class="fa fa-check"></i><b>17.4.2</b> Websites Return HTML</a></li>
<li class="chapter" data-level="17.4.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#html-elements"><i class="fa fa-check"></i><b>17.4.3</b> HTML Elements</a></li>
<li class="chapter" data-level="17.4.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#css"><i class="fa fa-check"></i><b>17.4.4</b> CSS</a></li>
<li class="chapter" data-level="17.4.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#finding-elements-with-selector-gadget"><i class="fa fa-check"></i><b>17.4.5</b> Finding Elements with Selector Gadget</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#scraping-presidential-statements"><i class="fa fa-check"></i><b>17.5</b> Scraping Presidential Statements</a><ul>
<li class="chapter" data-level="17.5.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#using-rvest-to-read-html"><i class="fa fa-check"></i><b>17.5.1</b> Using <code>RVest</code> to Read HTML</a></li>
<li class="chapter" data-level="17.5.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#find-page-elements"><i class="fa fa-check"></i><b>17.5.2</b> Find Page Elements</a></li>
<li class="chapter" data-level="17.5.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#get-attributes-and-text-of-elements"><i class="fa fa-check"></i><b>17.5.3</b> Get Attributes and Text of Elements</a></li>
<li class="chapter" data-level="17.5.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#lets-do-this"><i class="fa fa-check"></i><b>17.5.4</b> Let’s DO This</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>18</b> Text Analysis</a><ul>
<li class="chapter" data-level="18.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing"><i class="fa fa-check"></i><b>18.1</b> Preprocessing</a><ul>
<li class="chapter" data-level="18.1.1" data-path="text-analysis.html"><a href="text-analysis.html#from-words-to-numbers"><i class="fa fa-check"></i><b>18.1.1</b> From Words to Numbers</a></li>
<li class="chapter" data-level="18.1.2" data-path="text-analysis.html"><a href="text-analysis.html#exploring-the-dtm"><i class="fa fa-check"></i><b>18.1.2</b> Exploring the DTM</a></li>
<li class="chapter" data-level="18.1.3" data-path="text-analysis.html"><a href="text-analysis.html#exporting-the-dtm"><i class="fa fa-check"></i><b>18.1.3</b> Exporting the DTM</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="text-analysis.html"><a href="text-analysis.html#sentiment-analysis-and-dictionary-methods"><i class="fa fa-check"></i><b>18.2</b> Sentiment Analysis and Dictionary Methods</a><ul>
<li class="chapter" data-level="18.2.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing-and-setup"><i class="fa fa-check"></i><b>18.2.1</b> Preprocessing and Setup</a></li>
<li class="chapter" data-level="18.2.2" data-path="text-analysis.html"><a href="text-analysis.html#scoring-the-songs"><i class="fa fa-check"></i><b>18.2.2</b> Scoring the Songs</a></li>
<li class="chapter" data-level="18.2.3" data-path="text-analysis.html"><a href="text-analysis.html#challenges-19"><i class="fa fa-check"></i><b>18.2.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="text-analysis.html"><a href="text-analysis.html#distinctive-words"><i class="fa fa-check"></i><b>18.3</b> Distinctive Words</a><ul>
<li class="chapter" data-level="18.3.1" data-path="text-analysis.html"><a href="text-analysis.html#unique-usage"><i class="fa fa-check"></i><b>18.3.1</b> Unique Usage</a></li>
<li class="chapter" data-level="18.3.2" data-path="text-analysis.html"><a href="text-analysis.html#differences-in-frequencies"><i class="fa fa-check"></i><b>18.3.2</b> Differences in Frequencies</a></li>
<li class="chapter" data-level="18.3.3" data-path="text-analysis.html"><a href="text-analysis.html#differences-in-averages"><i class="fa fa-check"></i><b>18.3.3</b> Differences in Averages</a></li>
<li class="chapter" data-level="18.3.4" data-path="text-analysis.html"><a href="text-analysis.html#differences-in-averages-adjustment"><i class="fa fa-check"></i><b>18.3.4</b> Differences in Averages, Adjustment</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="text-analysis.html"><a href="text-analysis.html#structural-topic-models"><i class="fa fa-check"></i><b>18.4</b> Structural Topic Models</a><ul>
<li class="chapter" data-level="18.4.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing-1"><i class="fa fa-check"></i><b>18.4.1</b> Preprocessing</a></li>
<li class="chapter" data-level="18.4.2" data-path="text-analysis.html"><a href="text-analysis.html#estimate-model"><i class="fa fa-check"></i><b>18.4.2</b> Estimate Model</a></li>
<li class="chapter" data-level="18.4.3" data-path="text-analysis.html"><a href="text-analysis.html#interpret-model"><i class="fa fa-check"></i><b>18.4.3</b> Interpret Model</a></li>
<li class="chapter" data-level="18.4.4" data-path="text-analysis.html"><a href="text-analysis.html#analyze-topics"><i class="fa fa-check"></i><b>18.4.4</b> Analyze Topics</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PLSC 31101: Computational Tools for Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Data Transformation</h1>
<div id="introduction-to-data" class="section level2">
<h2><span class="header-section-number">9.1</span> Introduction to Data</h2>
<p>The upcoming weeks will be focused on using R for data cleaning and analysis. Let’s first get on the same page with some terms:</p>
<ul>
<li><p>A <strong>variable</strong> is a quantity, quality, or property that you can measure.</p></li>
<li><p>An <strong>observation</strong> is a set of measurements for the same unit. An observation will contain several values, each associated with a different variable. I will sometimes refer to an observation as a <strong>data point</strong> or an <strong>element</strong>.</p></li>
<li><p>A <strong>value</strong> is the state of a variable for a particular observation.</p></li>
<li><p><strong>Tabular data</strong> are a set of values, each associated with a variable and an observation. Tabular data have rows (observations) and columns (variables). Tabular data are also called <strong>rectangular</strong> data or <strong>spreadsheets</strong>.</p></li>
</ul>
<div id="the-gapminder-dataset" class="section level3">
<h3><span class="header-section-number">9.1.1</span> The Gapminder Dataset</h3>
<p>This lesson discusses how to perform basic exploratory data analysis.</p>
<p>For this unit, we will be working with the “Gapminder” dataset, which is an excerpt of the data available at gapminder.org. For each of 142 countries, the data provide values for life expectancy, GDP per capita, and population, every five years from 1952 to 2007.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-transformation.html#cb69-1"></a><span class="kw">require</span>(gapminder)</span>
<span id="cb69-2"><a href="data-transformation.html#cb69-2"></a><span class="co">#&gt; Loading required package: gapminder</span></span>
<span id="cb69-3"><a href="data-transformation.html#cb69-3"></a>gap &lt;-<span class="st"> </span>gapminder</span></code></pre></div>
</div>
<div id="structure-and-dimensions" class="section level3">
<h3><span class="header-section-number">9.1.2</span> Structure and Dimensions</h3>
<p>By loading the gapminder package, we now have access to a data frame by the same name. Get an overview of this with <code>str()</code>, which displays the structure of an object.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-transformation.html#cb70-1"></a><span class="kw">str</span>(gap)</span>
<span id="cb70-2"><a href="data-transformation.html#cb70-2"></a><span class="co">#&gt; tibble [1,704 × 6] (S3: tbl_df/tbl/data.frame)</span></span>
<span id="cb70-3"><a href="data-transformation.html#cb70-3"></a><span class="co">#&gt;  $ country  : Factor w/ 142 levels &quot;Afghanistan&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span id="cb70-4"><a href="data-transformation.html#cb70-4"></a><span class="co">#&gt;  $ continent: Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...</span></span>
<span id="cb70-5"><a href="data-transformation.html#cb70-5"></a><span class="co">#&gt;  $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...</span></span>
<span id="cb70-6"><a href="data-transformation.html#cb70-6"></a><span class="co">#&gt;  $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...</span></span>
<span id="cb70-7"><a href="data-transformation.html#cb70-7"></a><span class="co">#&gt;  $ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...</span></span>
<span id="cb70-8"><a href="data-transformation.html#cb70-8"></a><span class="co">#&gt;  $ gdpPercap: num [1:1704] 779 821 853 836 740 ...</span></span></code></pre></div>
<p><code>str()</code> will provide a sensible description of almost anything and, worst case, nothing bad can actually happen. When in doubt, just <code>str()</code> some of the recently created objects to get some ideas about what to do next.</p>
<p>We could print the <code>gapminder</code> object itself to screen. However, if you have used R before, you might be reluctant to do this, because large datasets just fill up your Console and provide very little insight.</p>
<p>The <code>head</code> function displays the first 6 rows of any dataframe.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-transformation.html#cb71-1"></a><span class="kw">head</span>(gap)</span>
<span id="cb71-2"><a href="data-transformation.html#cb71-2"></a><span class="co">#&gt; # A tibble: 6 x 6</span></span>
<span id="cb71-3"><a href="data-transformation.html#cb71-3"></a><span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb71-4"><a href="data-transformation.html#cb71-4"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb71-5"><a href="data-transformation.html#cb71-5"></a><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb71-6"><a href="data-transformation.html#cb71-6"></a><span class="co">#&gt; 2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb71-7"><a href="data-transformation.html#cb71-7"></a><span class="co">#&gt; 3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb71-8"><a href="data-transformation.html#cb71-8"></a><span class="co">#&gt; 4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb71-9"><a href="data-transformation.html#cb71-9"></a><span class="co">#&gt; 5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb71-10"><a href="data-transformation.html#cb71-10"></a><span class="co">#&gt; 6 Afghanistan Asia       1977    38.4 14880372      786.</span></span></code></pre></div>
<p>Here are some more common ways to query info from a dataframe:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-transformation.html#cb72-1"></a><span class="co"># Get number of rows and columns:</span></span>
<span id="cb72-2"><a href="data-transformation.html#cb72-2"></a><span class="kw">dim</span>(gap)</span>
<span id="cb72-3"><a href="data-transformation.html#cb72-3"></a><span class="co">#&gt; [1] 1704    6</span></span>
<span id="cb72-4"><a href="data-transformation.html#cb72-4"></a></span>
<span id="cb72-5"><a href="data-transformation.html#cb72-5"></a><span class="co"># See column names:</span></span>
<span id="cb72-6"><a href="data-transformation.html#cb72-6"></a><span class="kw">names</span>(gap)</span>
<span id="cb72-7"><a href="data-transformation.html#cb72-7"></a><span class="co">#&gt; [1] &quot;country&quot;   &quot;continent&quot; &quot;year&quot;      &quot;lifeExp&quot;   &quot;pop&quot;       &quot;gdpPercap&quot;</span></span>
<span id="cb72-8"><a href="data-transformation.html#cb72-8"></a></span>
<span id="cb72-9"><a href="data-transformation.html#cb72-9"></a><span class="co"># A statistical overview can be obtained with summary():</span></span>
<span id="cb72-10"><a href="data-transformation.html#cb72-10"></a><span class="kw">summary</span>(gap)</span>
<span id="cb72-11"><a href="data-transformation.html#cb72-11"></a><span class="co">#&gt;         country        continent        year         lifeExp    </span></span>
<span id="cb72-12"><a href="data-transformation.html#cb72-12"></a><span class="co">#&gt;  Afghanistan:  12   Africa  :624   Min.   :1952   Min.   :23.6  </span></span>
<span id="cb72-13"><a href="data-transformation.html#cb72-13"></a><span class="co">#&gt;  Albania    :  12   Americas:300   1st Qu.:1966   1st Qu.:48.2  </span></span>
<span id="cb72-14"><a href="data-transformation.html#cb72-14"></a><span class="co">#&gt;  Algeria    :  12   Asia    :396   Median :1980   Median :60.7  </span></span>
<span id="cb72-15"><a href="data-transformation.html#cb72-15"></a><span class="co">#&gt;  Angola     :  12   Europe  :360   Mean   :1980   Mean   :59.5  </span></span>
<span id="cb72-16"><a href="data-transformation.html#cb72-16"></a><span class="co">#&gt;  Argentina  :  12   Oceania : 24   3rd Qu.:1993   3rd Qu.:70.8  </span></span>
<span id="cb72-17"><a href="data-transformation.html#cb72-17"></a><span class="co">#&gt;  Australia  :  12                  Max.   :2007   Max.   :82.6  </span></span>
<span id="cb72-18"><a href="data-transformation.html#cb72-18"></a><span class="co">#&gt;  (Other)    :1632                                               </span></span>
<span id="cb72-19"><a href="data-transformation.html#cb72-19"></a><span class="co">#&gt;       pop             gdpPercap     </span></span>
<span id="cb72-20"><a href="data-transformation.html#cb72-20"></a><span class="co">#&gt;  Min.   :6.00e+04   Min.   :   241  </span></span>
<span id="cb72-21"><a href="data-transformation.html#cb72-21"></a><span class="co">#&gt;  1st Qu.:2.79e+06   1st Qu.:  1202  </span></span>
<span id="cb72-22"><a href="data-transformation.html#cb72-22"></a><span class="co">#&gt;  Median :7.02e+06   Median :  3532  </span></span>
<span id="cb72-23"><a href="data-transformation.html#cb72-23"></a><span class="co">#&gt;  Mean   :2.96e+07   Mean   :  7215  </span></span>
<span id="cb72-24"><a href="data-transformation.html#cb72-24"></a><span class="co">#&gt;  3rd Qu.:1.96e+07   3rd Qu.:  9325  </span></span>
<span id="cb72-25"><a href="data-transformation.html#cb72-25"></a><span class="co">#&gt;  Max.   :1.32e+09   Max.   :113523  </span></span>
<span id="cb72-26"><a href="data-transformation.html#cb72-26"></a><span class="co">#&gt; </span></span></code></pre></div>
</div>
<div id="variables-1" class="section level3">
<h3><span class="header-section-number">9.1.3</span> Variables</h3>
<p>To specify a single variable from a data frame, use the dollar sign <code>$</code>. Let’s explore the numeric variable for life expectancy.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-transformation.html#cb73-1"></a><span class="kw">head</span>(gap<span class="op">$</span>lifeExp)</span>
<span id="cb73-2"><a href="data-transformation.html#cb73-2"></a><span class="co">#&gt; [1] 28.8 30.3 32.0 34.0 36.1 38.4</span></span>
<span id="cb73-3"><a href="data-transformation.html#cb73-3"></a><span class="kw">summary</span>(gap<span class="op">$</span>lifeExp)</span>
<span id="cb73-4"><a href="data-transformation.html#cb73-4"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb73-5"><a href="data-transformation.html#cb73-5"></a><span class="co">#&gt;    23.6    48.2    60.7    59.5    70.8    82.6</span></span>
<span id="cb73-6"><a href="data-transformation.html#cb73-6"></a><span class="kw">hist</span>(gap<span class="op">$</span>lifeExp)</span></code></pre></div>
<p><img src="plsc31101_files/figure-html/unnamed-chunk-106-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Data frames – unlike matrices in R – can hold variables of different flavors, such as character data (subject ID or name), quantitative data (white blood cell count), and categorical information (treated vs. untreated).</p>
<p>For example, the <code>year</code> variables is numeric, while the variables for <code>country</code> and <code>continent</code> hold categorical information, which is stored as a factor in R.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-transformation.html#cb74-1"></a><span class="kw">summary</span>(gap<span class="op">$</span>year)</span>
<span id="cb74-2"><a href="data-transformation.html#cb74-2"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb74-3"><a href="data-transformation.html#cb74-3"></a><span class="co">#&gt;    1952    1966    1980    1980    1993    2007</span></span>
<span id="cb74-4"><a href="data-transformation.html#cb74-4"></a><span class="kw">summary</span>(gap<span class="op">$</span>country)</span>
<span id="cb74-5"><a href="data-transformation.html#cb74-5"></a><span class="co">#&gt;              Afghanistan                  Albania                  Algeria </span></span>
<span id="cb74-6"><a href="data-transformation.html#cb74-6"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-7"><a href="data-transformation.html#cb74-7"></a><span class="co">#&gt;                   Angola                Argentina                Australia </span></span>
<span id="cb74-8"><a href="data-transformation.html#cb74-8"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-9"><a href="data-transformation.html#cb74-9"></a><span class="co">#&gt;                  Austria                  Bahrain               Bangladesh </span></span>
<span id="cb74-10"><a href="data-transformation.html#cb74-10"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-11"><a href="data-transformation.html#cb74-11"></a><span class="co">#&gt;                  Belgium                    Benin                  Bolivia </span></span>
<span id="cb74-12"><a href="data-transformation.html#cb74-12"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-13"><a href="data-transformation.html#cb74-13"></a><span class="co">#&gt;   Bosnia and Herzegovina                 Botswana                   Brazil </span></span>
<span id="cb74-14"><a href="data-transformation.html#cb74-14"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-15"><a href="data-transformation.html#cb74-15"></a><span class="co">#&gt;                 Bulgaria             Burkina Faso                  Burundi </span></span>
<span id="cb74-16"><a href="data-transformation.html#cb74-16"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-17"><a href="data-transformation.html#cb74-17"></a><span class="co">#&gt;                 Cambodia                 Cameroon                   Canada </span></span>
<span id="cb74-18"><a href="data-transformation.html#cb74-18"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-19"><a href="data-transformation.html#cb74-19"></a><span class="co">#&gt; Central African Republic                     Chad                    Chile </span></span>
<span id="cb74-20"><a href="data-transformation.html#cb74-20"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-21"><a href="data-transformation.html#cb74-21"></a><span class="co">#&gt;                    China                 Colombia                  Comoros </span></span>
<span id="cb74-22"><a href="data-transformation.html#cb74-22"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-23"><a href="data-transformation.html#cb74-23"></a><span class="co">#&gt;         Congo, Dem. Rep.              Congo, Rep.               Costa Rica </span></span>
<span id="cb74-24"><a href="data-transformation.html#cb74-24"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-25"><a href="data-transformation.html#cb74-25"></a><span class="co">#&gt;            Cote d&#39;Ivoire                  Croatia                     Cuba </span></span>
<span id="cb74-26"><a href="data-transformation.html#cb74-26"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-27"><a href="data-transformation.html#cb74-27"></a><span class="co">#&gt;           Czech Republic                  Denmark                 Djibouti </span></span>
<span id="cb74-28"><a href="data-transformation.html#cb74-28"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-29"><a href="data-transformation.html#cb74-29"></a><span class="co">#&gt;       Dominican Republic                  Ecuador                    Egypt </span></span>
<span id="cb74-30"><a href="data-transformation.html#cb74-30"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-31"><a href="data-transformation.html#cb74-31"></a><span class="co">#&gt;              El Salvador        Equatorial Guinea                  Eritrea </span></span>
<span id="cb74-32"><a href="data-transformation.html#cb74-32"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-33"><a href="data-transformation.html#cb74-33"></a><span class="co">#&gt;                 Ethiopia                  Finland                   France </span></span>
<span id="cb74-34"><a href="data-transformation.html#cb74-34"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-35"><a href="data-transformation.html#cb74-35"></a><span class="co">#&gt;                    Gabon                   Gambia                  Germany </span></span>
<span id="cb74-36"><a href="data-transformation.html#cb74-36"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-37"><a href="data-transformation.html#cb74-37"></a><span class="co">#&gt;                    Ghana                   Greece                Guatemala </span></span>
<span id="cb74-38"><a href="data-transformation.html#cb74-38"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-39"><a href="data-transformation.html#cb74-39"></a><span class="co">#&gt;                   Guinea            Guinea-Bissau                    Haiti </span></span>
<span id="cb74-40"><a href="data-transformation.html#cb74-40"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-41"><a href="data-transformation.html#cb74-41"></a><span class="co">#&gt;                 Honduras         Hong Kong, China                  Hungary </span></span>
<span id="cb74-42"><a href="data-transformation.html#cb74-42"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-43"><a href="data-transformation.html#cb74-43"></a><span class="co">#&gt;                  Iceland                    India                Indonesia </span></span>
<span id="cb74-44"><a href="data-transformation.html#cb74-44"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-45"><a href="data-transformation.html#cb74-45"></a><span class="co">#&gt;                     Iran                     Iraq                  Ireland </span></span>
<span id="cb74-46"><a href="data-transformation.html#cb74-46"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-47"><a href="data-transformation.html#cb74-47"></a><span class="co">#&gt;                   Israel                    Italy                  Jamaica </span></span>
<span id="cb74-48"><a href="data-transformation.html#cb74-48"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-49"><a href="data-transformation.html#cb74-49"></a><span class="co">#&gt;                    Japan                   Jordan                    Kenya </span></span>
<span id="cb74-50"><a href="data-transformation.html#cb74-50"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-51"><a href="data-transformation.html#cb74-51"></a><span class="co">#&gt;         Korea, Dem. Rep.              Korea, Rep.                   Kuwait </span></span>
<span id="cb74-52"><a href="data-transformation.html#cb74-52"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-53"><a href="data-transformation.html#cb74-53"></a><span class="co">#&gt;                  Lebanon                  Lesotho                  Liberia </span></span>
<span id="cb74-54"><a href="data-transformation.html#cb74-54"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-55"><a href="data-transformation.html#cb74-55"></a><span class="co">#&gt;                    Libya               Madagascar                   Malawi </span></span>
<span id="cb74-56"><a href="data-transformation.html#cb74-56"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-57"><a href="data-transformation.html#cb74-57"></a><span class="co">#&gt;                 Malaysia                     Mali               Mauritania </span></span>
<span id="cb74-58"><a href="data-transformation.html#cb74-58"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-59"><a href="data-transformation.html#cb74-59"></a><span class="co">#&gt;                Mauritius                   Mexico                 Mongolia </span></span>
<span id="cb74-60"><a href="data-transformation.html#cb74-60"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-61"><a href="data-transformation.html#cb74-61"></a><span class="co">#&gt;               Montenegro                  Morocco               Mozambique </span></span>
<span id="cb74-62"><a href="data-transformation.html#cb74-62"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-63"><a href="data-transformation.html#cb74-63"></a><span class="co">#&gt;                  Myanmar                  Namibia                    Nepal </span></span>
<span id="cb74-64"><a href="data-transformation.html#cb74-64"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-65"><a href="data-transformation.html#cb74-65"></a><span class="co">#&gt;              Netherlands              New Zealand                Nicaragua </span></span>
<span id="cb74-66"><a href="data-transformation.html#cb74-66"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-67"><a href="data-transformation.html#cb74-67"></a><span class="co">#&gt;                    Niger                  Nigeria                   Norway </span></span>
<span id="cb74-68"><a href="data-transformation.html#cb74-68"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-69"><a href="data-transformation.html#cb74-69"></a><span class="co">#&gt;                     Oman                 Pakistan                   Panama </span></span>
<span id="cb74-70"><a href="data-transformation.html#cb74-70"></a><span class="co">#&gt;                       12                       12                       12 </span></span>
<span id="cb74-71"><a href="data-transformation.html#cb74-71"></a><span class="co">#&gt;                  (Other) </span></span>
<span id="cb74-72"><a href="data-transformation.html#cb74-72"></a><span class="co">#&gt;                      516</span></span>
<span id="cb74-73"><a href="data-transformation.html#cb74-73"></a><span class="kw">summary</span>(gap<span class="op">$</span>contintent)</span>
<span id="cb74-74"><a href="data-transformation.html#cb74-74"></a><span class="co">#&gt; Warning: Unknown or uninitialised column: `contintent`.</span></span>
<span id="cb74-75"><a href="data-transformation.html#cb74-75"></a><span class="co">#&gt; Length  Class   Mode </span></span>
<span id="cb74-76"><a href="data-transformation.html#cb74-76"></a><span class="co">#&gt;      0   NULL   NULL</span></span></code></pre></div>
<p>Sometimes we need to do some basic checking for the number of observations or types of observations in our dataset. To do this quickly and easily, <code>table()</code> is our friend.</p>
<p>Let’s look at the number of observations first by region, and then by both region and year:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-transformation.html#cb75-1"></a><span class="kw">table</span>(gap<span class="op">$</span>continent)</span>
<span id="cb75-2"><a href="data-transformation.html#cb75-2"></a><span class="co">#&gt; </span></span>
<span id="cb75-3"><a href="data-transformation.html#cb75-3"></a><span class="co">#&gt;   Africa Americas     Asia   Europe  Oceania </span></span>
<span id="cb75-4"><a href="data-transformation.html#cb75-4"></a><span class="co">#&gt;      624      300      396      360       24</span></span>
<span id="cb75-5"><a href="data-transformation.html#cb75-5"></a><span class="kw">table</span>(gap<span class="op">$</span>continent, gap<span class="op">$</span>year)</span>
<span id="cb75-6"><a href="data-transformation.html#cb75-6"></a><span class="co">#&gt;           </span></span>
<span id="cb75-7"><a href="data-transformation.html#cb75-7"></a><span class="co">#&gt;            1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 2002 2007</span></span>
<span id="cb75-8"><a href="data-transformation.html#cb75-8"></a><span class="co">#&gt;   Africa     52   52   52   52   52   52   52   52   52   52   52   52</span></span>
<span id="cb75-9"><a href="data-transformation.html#cb75-9"></a><span class="co">#&gt;   Americas   25   25   25   25   25   25   25   25   25   25   25   25</span></span>
<span id="cb75-10"><a href="data-transformation.html#cb75-10"></a><span class="co">#&gt;   Asia       33   33   33   33   33   33   33   33   33   33   33   33</span></span>
<span id="cb75-11"><a href="data-transformation.html#cb75-11"></a><span class="co">#&gt;   Europe     30   30   30   30   30   30   30   30   30   30   30   30</span></span>
<span id="cb75-12"><a href="data-transformation.html#cb75-12"></a><span class="co">#&gt;   Oceania     2    2    2    2    2    2    2    2    2    2    2    2</span></span></code></pre></div>
<p>We can even divide by the total number of rows to get proportion, percent, etc.:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data-transformation.html#cb76-1"></a><span class="kw">table</span>(gap<span class="op">$</span>continent)<span class="op">/</span><span class="kw">nrow</span>(gap)</span>
<span id="cb76-2"><a href="data-transformation.html#cb76-2"></a><span class="co">#&gt; </span></span>
<span id="cb76-3"><a href="data-transformation.html#cb76-3"></a><span class="co">#&gt;   Africa Americas     Asia   Europe  Oceania </span></span>
<span id="cb76-4"><a href="data-transformation.html#cb76-4"></a><span class="co">#&gt;   0.3662   0.1761   0.2324   0.2113   0.0141</span></span>
<span id="cb76-5"><a href="data-transformation.html#cb76-5"></a><span class="kw">table</span>(gap<span class="op">$</span>continent)<span class="op">/</span><span class="kw">nrow</span>(gap)<span class="op">*</span><span class="dv">100</span></span>
<span id="cb76-6"><a href="data-transformation.html#cb76-6"></a><span class="co">#&gt; </span></span>
<span id="cb76-7"><a href="data-transformation.html#cb76-7"></a><span class="co">#&gt;   Africa Americas     Asia   Europe  Oceania </span></span>
<span id="cb76-8"><a href="data-transformation.html#cb76-8"></a><span class="co">#&gt;    36.62    17.61    23.24    21.13     1.41</span></span></code></pre></div>
</div>
<div id="challenges-5" class="section level3">
<h3><span class="header-section-number">9.1.4</span> Challenges</h3>
<div id="challenge-1.-2" class="section level4 unnumbered">
<h4>Challenge 1.</h4>
<p>Read the <code>polity_sub</code> dataset in the <code>Data</code> sub-directory.</p>
</div>
<div id="challenge-2.-1" class="section level4 unnumbered">
<h4>Challenge 2.</h4>
<p>Report the number and name of each variable in the dataset.</p>
</div>
<div id="challenge-3.-1" class="section level4 unnumbered">
<h4>Challenge 3.</h4>
<p>What is the mean <code>polity2</code> score in the dataset?</p>
</div>
<div id="challenge-4." class="section level4 unnumbered">
<h4>Challenge 4.</h4>
<p>What is the range of the <code>polity2</code> variable?</p>
</div>
<div id="challenge-5." class="section level4 unnumbered">
<h4>Challenge 5.</h4>
<p>How many unique countries are in the dataset?</p>

</div>
</div>
</div>
<div id="introduction-to-dplyr" class="section level2">
<h2><span class="header-section-number">9.2</span> Introduction to <code>dplyr</code></h2>
<div id="tidyverse" class="section level3">
<h3><span class="header-section-number">9.2.1</span> <code>tidyverse</code></h3>
<blockquote>
<p>It is often said that 80% of data analysis is spent on the process of cleaning and preparing the data.</p>
</blockquote>
<blockquote>
<p>Dasu and Johnson, 2003</p>
</blockquote>
<p>For most applied researchers, data preparation usually involves 3 main steps:</p>
<ol style="list-style-type: decimal">
<li><strong>Transforming</strong> data frames, e.g., filtering, summarizing, and conducting calculations across groups.</li>
<li><strong>Tidying</strong> data into the appropriate format.</li>
<li><strong>Merging</strong> or linking several datasets to create a bigger dataset.</li>
</ol>
<p>The <a href="https://www.tidyverse.org/"><code>tidyverse</code></a> is a suite of packages designed specifically to help with these steps. These are by no means the only packages out there for data wrangling, but they are increasingly popular for their readable, straightforward syntax and sensible default behaviors.</p>
<p>In this chapter, we are going to focus on how to use the <code>dplyr</code> package for data transformation tasks.</p>
<p>For this unit, we will be working with the Gapminder dataset again.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-transformation.html#cb77-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb77-2"><a href="data-transformation.html#cb77-2"></a><span class="kw">library</span>(gapminder)</span>
<span id="cb77-3"><a href="data-transformation.html#cb77-3"></a></span>
<span id="cb77-4"><a href="data-transformation.html#cb77-4"></a>gap &lt;-<span class="st"> </span>gapminder</span>
<span id="cb77-5"><a href="data-transformation.html#cb77-5"></a><span class="kw">head</span>(gap)</span>
<span id="cb77-6"><a href="data-transformation.html#cb77-6"></a><span class="co">#&gt; # A tibble: 6 x 6</span></span>
<span id="cb77-7"><a href="data-transformation.html#cb77-7"></a><span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb77-8"><a href="data-transformation.html#cb77-8"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb77-9"><a href="data-transformation.html#cb77-9"></a><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb77-10"><a href="data-transformation.html#cb77-10"></a><span class="co">#&gt; 2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb77-11"><a href="data-transformation.html#cb77-11"></a><span class="co">#&gt; 3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb77-12"><a href="data-transformation.html#cb77-12"></a><span class="co">#&gt; 4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb77-13"><a href="data-transformation.html#cb77-13"></a><span class="co">#&gt; 5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb77-14"><a href="data-transformation.html#cb77-14"></a><span class="co">#&gt; 6 Afghanistan Asia       1977    38.4 14880372      786.</span></span></code></pre></div>
</div>
<div id="why-dplyr" class="section level3">
<h3><span class="header-section-number">9.2.2</span> Why <code>dplyr</code>?</h3>
<p>If you have ever used base R before, you know the following will calculate the mean GDP per capita within each region:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data-transformation.html#cb78-1"></a><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>])</span>
<span id="cb78-2"><a href="data-transformation.html#cb78-2"></a><span class="co">#&gt; [1] 2194</span></span>
<span id="cb78-3"><a href="data-transformation.html#cb78-3"></a><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Americas&quot;</span>])</span>
<span id="cb78-4"><a href="data-transformation.html#cb78-4"></a><span class="co">#&gt; [1] 7136</span></span>
<span id="cb78-5"><a href="data-transformation.html#cb78-5"></a><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Asia&quot;</span>])</span>
<span id="cb78-6"><a href="data-transformation.html#cb78-6"></a><span class="co">#&gt; [1] 7902</span></span></code></pre></div>
<p>But this is not ideal because it involves a fair bit of repetition. Repeating yourself will cost you time, both now and later, and potentially introduce some nasty bugs.</p>
<p>Luckily, the <a href="https://cran.r-project.org/web/packages/dplyr/dplyr.pdf"><code>dplyr</code></a> package provides a number of very useful functions for manipulating dataframes. These functions will save you time by reducing repetition. As an added bonus, you might even find the <code>dplyr</code> grammar easier to read.</p>
<p>Here, we are going to cover 7 of the most commonly used <code>dplyr</code> functions. We will also cover pipes (<code>%&gt;%</code>), which are used to combine those functions.</p>
<ol style="list-style-type: decimal">
<li><code>select()</code></li>
<li><code>filter()</code></li>
<li><code>mutate()</code></li>
<li><code>arrange()</code></li>
<li><code>count()</code></li>
<li><code>group_by()</code></li>
<li><code>summarize()</code></li>
<li><code>mutate()</code></li>
</ol>
<p>If you have not installed <code>tidyverse</code>, please do so now:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-transformation.html#cb79-1"></a><span class="co"># not run</span></span>
<span id="cb79-2"><a href="data-transformation.html#cb79-2"></a><span class="co"># install.packages(&#39;tidyverse&#39;)</span></span>
<span id="cb79-3"><a href="data-transformation.html#cb79-3"></a><span class="kw">require</span>(tidyverse)</span></code></pre></div>
</div>
<div id="select-columns-with-select" class="section level3">
<h3><span class="header-section-number">9.2.3</span> Select Columns with <code>select</code></h3>
<p>Imagine that we have just received the Gapminder dataset, but are only interested in a few variables in it. We could use the <code>select()</code> function to keep only the variables we select.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-transformation.html#cb80-1"></a>year_country_gdp &lt;-<span class="st"> </span><span class="kw">select</span>(gap, year, country, gdpPercap)</span>
<span id="cb80-2"><a href="data-transformation.html#cb80-2"></a><span class="kw">head</span>(year_country_gdp)</span>
<span id="cb80-3"><a href="data-transformation.html#cb80-3"></a><span class="co">#&gt; # A tibble: 6 x 3</span></span>
<span id="cb80-4"><a href="data-transformation.html#cb80-4"></a><span class="co">#&gt;    year country     gdpPercap</span></span>
<span id="cb80-5"><a href="data-transformation.html#cb80-5"></a><span class="co">#&gt;   &lt;int&gt; &lt;fct&gt;           &lt;dbl&gt;</span></span>
<span id="cb80-6"><a href="data-transformation.html#cb80-6"></a><span class="co">#&gt; 1  1952 Afghanistan      779.</span></span>
<span id="cb80-7"><a href="data-transformation.html#cb80-7"></a><span class="co">#&gt; 2  1957 Afghanistan      821.</span></span>
<span id="cb80-8"><a href="data-transformation.html#cb80-8"></a><span class="co">#&gt; 3  1962 Afghanistan      853.</span></span>
<span id="cb80-9"><a href="data-transformation.html#cb80-9"></a><span class="co">#&gt; 4  1967 Afghanistan      836.</span></span>
<span id="cb80-10"><a href="data-transformation.html#cb80-10"></a><span class="co">#&gt; 5  1972 Afghanistan      740.</span></span>
<span id="cb80-11"><a href="data-transformation.html#cb80-11"></a><span class="co">#&gt; 6  1977 Afghanistan      786.</span></span></code></pre></div>
<p><img src="img/dplyr-fig1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>If we open up <code>year_country_gdp</code>, we will see that it only contains the <code>year</code>, <code>country</code>, and <code>gdpPercap</code>. This is equivalent to the base R subsetting function:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-transformation.html#cb81-1"></a>year_country_gdp_base &lt;-<span class="st"> </span>gap[,<span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;country&quot;</span>, <span class="st">&quot;gdpPercap&quot;</span>)]</span>
<span id="cb81-2"><a href="data-transformation.html#cb81-2"></a><span class="kw">head</span>(year_country_gdp)</span>
<span id="cb81-3"><a href="data-transformation.html#cb81-3"></a><span class="co">#&gt; # A tibble: 6 x 3</span></span>
<span id="cb81-4"><a href="data-transformation.html#cb81-4"></a><span class="co">#&gt;    year country     gdpPercap</span></span>
<span id="cb81-5"><a href="data-transformation.html#cb81-5"></a><span class="co">#&gt;   &lt;int&gt; &lt;fct&gt;           &lt;dbl&gt;</span></span>
<span id="cb81-6"><a href="data-transformation.html#cb81-6"></a><span class="co">#&gt; 1  1952 Afghanistan      779.</span></span>
<span id="cb81-7"><a href="data-transformation.html#cb81-7"></a><span class="co">#&gt; 2  1957 Afghanistan      821.</span></span>
<span id="cb81-8"><a href="data-transformation.html#cb81-8"></a><span class="co">#&gt; 3  1962 Afghanistan      853.</span></span>
<span id="cb81-9"><a href="data-transformation.html#cb81-9"></a><span class="co">#&gt; 4  1967 Afghanistan      836.</span></span>
<span id="cb81-10"><a href="data-transformation.html#cb81-10"></a><span class="co">#&gt; 5  1972 Afghanistan      740.</span></span>
<span id="cb81-11"><a href="data-transformation.html#cb81-11"></a><span class="co">#&gt; 6  1977 Afghanistan      786.</span></span></code></pre></div>
</div>
<div id="the-pipe" class="section level3">
<h3><span class="header-section-number">9.2.4</span> The Pipe</h3>
<p><img src="img/pipe.jpg" width="70%" style="display: block; margin: auto;" /></p>
<p>Above, we used what is called ‘normal’ grammar, but the strengths of <code>dplyr</code> lie in combining several functions using <em>pipes</em>.</p>
<p>In typical base R code, a simple operation might be written like:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="data-transformation.html#cb82-1"></a><span class="co"># NOT run</span></span>
<span id="cb82-2"><a href="data-transformation.html#cb82-2"></a>cupcakes &lt;-<span class="st"> </span><span class="kw">bake</span>(<span class="kw">pour</span>(<span class="kw">mix</span>(ingredients)))</span></code></pre></div>
<p>A computer has no trouble understanding this, and your cupcakes will be made just fine, but a person has to read right to left to understand the order of operations – the opposite of how most Western languages are read – making it harder to understand what is being done!</p>
<p>To be more readable without pipes, we might break up this code into intermediate objects:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-transformation.html#cb83-1"></a><span class="co">## NOT run</span></span>
<span id="cb83-2"><a href="data-transformation.html#cb83-2"></a>batter &lt;-<span class="st"> </span><span class="kw">mix</span>(ingredients)</span>
<span id="cb83-3"><a href="data-transformation.html#cb83-3"></a>muffin_tin &lt;-<span class="st"> </span><span class="kw">pour</span>(batter)</span>
<span id="cb83-4"><a href="data-transformation.html#cb83-4"></a>cupcakes &lt;-<span class="st"> </span><span class="kw">bake</span>(muffin_tin)</span></code></pre></div>
<p>But this can clutter our environment with a lot of variables that are not very useful to us. Plus, these variables are often named very similar things (e.g., step, step1, step2…), which can lead to confusion and the creation of hard-to-track-down bugs.</p>
<div id="enter-the-pipe" class="section level4 unnumbered">
<h4>Enter the Pipe…</h4>
<p>The <em>pipe</em> makes it easier to read code by laying out operations from left to right – each line can be read like a line of a recipe for the perfect data frame!</p>
<p>Pipes take the input on the left side of the <code>%&gt;%</code> symbol and pass it in as the first argument to the function on the right side.</p>
<p>With pipes, our cupcake example might be written like:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-transformation.html#cb84-1"></a><span class="co">## NOT run</span></span>
<span id="cb84-2"><a href="data-transformation.html#cb84-2"></a>cupcakes &lt;-<span class="st"> </span>ingredients <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb84-3"><a href="data-transformation.html#cb84-3"></a><span class="st">  </span><span class="kw">mix</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb84-4"><a href="data-transformation.html#cb84-4"></a><span class="st">  </span><span class="kw">pour</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb84-5"><a href="data-transformation.html#cb84-5"></a><span class="st">  </span><span class="kw">bake</span>()</span></code></pre></div>
</div>
<div id="select-pipe" class="section level4 unnumbered">
<h4><code>select</code> &amp; Pipe (<code>%&gt;%</code>)</h4>
<p>Let’s repeat what we did above with the Gapminder dataset using pipes:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-transformation.html#cb85-1"></a>year_country_gdp &lt;-<span class="st"> </span>gap <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb85-2"><a href="data-transformation.html#cb85-2"></a><span class="st">  </span><span class="kw">select</span>(year, country, gdpPercap)</span></code></pre></div>
<p>First, we summon the gapminder data frame and pass it on to the next step using the pipe symbol <code>%&gt;%</code>.</p>
<p>The second step is the <code>select()</code> function. In this case, we do not specify which data object we use in the call to <code>select()</code> since we have piped it in from the previous line.</p>
</div>
<div id="tips-for-piping" class="section level4 unnumbered">
<h4>Tips for Piping</h4>
<ol style="list-style-type: decimal">
<li><p>Remember that you do not assign anything within the pipes — that is, you should not use <code>&lt;-</code> inside the piped operation. Only use <code>&lt;-</code> at the beginning of your code if you want to save the output.</p></li>
<li><p>Remember to add the pipe <code>%&gt;%</code> at the end of each line involved in the piped operation. A good rule of thumb: since RStudio will automatically indent lines of code that are part of a piped operation, if the line is not indented, it probably has not been added to the pipe. If you have an error in a piped operation, always check to make sure the pipe is connected as you expect.</p></li>
<li><p>In RStudio, the hotkey for the pipe is <code>Ctrl + Shift + M</code>.</p></li>
</ol>
</div>
</div>
<div id="filter-rows-with-filter" class="section level3">
<h3><span class="header-section-number">9.2.5</span> Filter Rows with <code>filter</code></h3>
<p>Now let’s say we are only interested in African countries. We can combine <code>select</code> and <code>filter</code> to select only the observations where <code>continent</code> is <code>Africa</code>.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-transformation.html#cb86-1"></a>year_country_gdp_africa &lt;-<span class="st"> </span>gap <span class="op">%&gt;%</span></span>
<span id="cb86-2"><a href="data-transformation.html#cb86-2"></a><span class="st">    </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb86-3"><a href="data-transformation.html#cb86-3"></a><span class="st">    </span><span class="kw">select</span>(year, country, gdpPercap)</span></code></pre></div>
<p>As with last time, first we pass the gapminder dataframe to the <code>filter()</code> function, then we pass the filtered version of the Gapminder dataframe to the <code>select()</code> function.</p>
<p>To clarify, both the <code>select</code> and <code>filter</code> functions subset the data frame. The difference is that <code>select</code> extracts certain columns, while <code>filter</code> extracts certain rows.</p>
<p><strong>NB</strong>: The order of operations is very important in this case. If we used <code>select</code> first, <code>filter</code> would not be able to find the variable <code>continent</code>, since we would have removed it in the previous step.</p>

</div>
</div>
<div id="more-dplyr-functions" class="section level2">
<h2><span class="header-section-number">9.3</span> More <code>dplyr</code> functions</h2>
<div id="where-were-we" class="section level4 unnumbered">
<h4>Where were we?</h4>
<p>In the previous lesson, we used two very important verbs and an operator:</p>
<ul>
<li><code>filter()</code> for subsetting data with row logic.</li>
<li><code>select()</code> for subsetting data variable- or column-wise.</li>
<li>The pipe operator <code>%&gt;%</code>, which feeds the LHS as the first argument to the expression on the RHS.</li>
</ul>
<p>We also discussed <code>dplyr</code>’s role inside the tidyverse:</p>
<ul>
<li><code>dplyr</code> is a core package in the <a href="tidyverse-github">tidyverse</a> meta-package.</li>
<li>Since we often make incidental usage of the others, we will load <code>dplyr</code> and the others via <code>library(tidyverse)</code>.</li>
</ul>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-transformation.html#cb87-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb87-2"><a href="data-transformation.html#cb87-2"></a><span class="kw">library</span>(gapminder)</span>
<span id="cb87-3"><a href="data-transformation.html#cb87-3"></a></span>
<span id="cb87-4"><a href="data-transformation.html#cb87-4"></a>gap &lt;-<span class="st"> </span>gapminder</span></code></pre></div>
</div>
<div id="use-mutate-to-add-new-variables" class="section level3">
<h3><span class="header-section-number">9.3.1</span> Use <code>mutate()</code> to Add New Variables</h3>
<p>Imagine we wanted to recover each country’s GDP. After all, the Gapminder data has a variable for population and GDP per capita. Let’s multiply them together.</p>
<p><code>mutate()</code> is a function that defines and inserts new variables into a tibble. You can refer to existing variables by name.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="data-transformation.html#cb88-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb88-2"><a href="data-transformation.html#cb88-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp =</span> pop <span class="op">*</span><span class="st"> </span>gdpPercap) <span class="op">%&gt;%</span></span>
<span id="cb88-3"><a href="data-transformation.html#cb88-3"></a><span class="st">  </span><span class="kw">head</span>()</span>
<span id="cb88-4"><a href="data-transformation.html#cb88-4"></a><span class="co">#&gt; # A tibble: 6 x 7</span></span>
<span id="cb88-5"><a href="data-transformation.html#cb88-5"></a><span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap          gdp</span></span>
<span id="cb88-6"><a href="data-transformation.html#cb88-6"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb88-7"><a href="data-transformation.html#cb88-7"></a><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.  6567086330.</span></span>
<span id="cb88-8"><a href="data-transformation.html#cb88-8"></a><span class="co">#&gt; 2 Afghanistan Asia       1957    30.3  9240934      821.  7585448670.</span></span>
<span id="cb88-9"><a href="data-transformation.html#cb88-9"></a><span class="co">#&gt; 3 Afghanistan Asia       1962    32.0 10267083      853.  8758855797.</span></span>
<span id="cb88-10"><a href="data-transformation.html#cb88-10"></a><span class="co">#&gt; 4 Afghanistan Asia       1967    34.0 11537966      836.  9648014150.</span></span>
<span id="cb88-11"><a href="data-transformation.html#cb88-11"></a><span class="co">#&gt; 5 Afghanistan Asia       1972    36.1 13079460      740.  9678553274.</span></span>
<span id="cb88-12"><a href="data-transformation.html#cb88-12"></a><span class="co">#&gt; 6 Afghanistan Asia       1977    38.4 14880372      786. 11697659231.</span></span></code></pre></div>
<p>We can add multiple columns in one call:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-transformation.html#cb89-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb89-2"><a href="data-transformation.html#cb89-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp =</span> pop <span class="op">*</span><span class="st"> </span>gdpPercap,</span>
<span id="cb89-3"><a href="data-transformation.html#cb89-3"></a>         <span class="dt">log_gdp =</span> <span class="kw">log</span>(gdp)) <span class="op">%&gt;%</span></span>
<span id="cb89-4"><a href="data-transformation.html#cb89-4"></a><span class="st">  </span><span class="kw">head</span>()</span>
<span id="cb89-5"><a href="data-transformation.html#cb89-5"></a><span class="co">#&gt; # A tibble: 6 x 8</span></span>
<span id="cb89-6"><a href="data-transformation.html#cb89-6"></a><span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap          gdp log_gdp</span></span>
<span id="cb89-7"><a href="data-transformation.html#cb89-7"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb89-8"><a href="data-transformation.html#cb89-8"></a><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.  6567086330.    22.6</span></span>
<span id="cb89-9"><a href="data-transformation.html#cb89-9"></a><span class="co">#&gt; 2 Afghanistan Asia       1957    30.3  9240934      821.  7585448670.    22.7</span></span>
<span id="cb89-10"><a href="data-transformation.html#cb89-10"></a><span class="co">#&gt; 3 Afghanistan Asia       1962    32.0 10267083      853.  8758855797.    22.9</span></span>
<span id="cb89-11"><a href="data-transformation.html#cb89-11"></a><span class="co">#&gt; 4 Afghanistan Asia       1967    34.0 11537966      836.  9648014150.    23.0</span></span>
<span id="cb89-12"><a href="data-transformation.html#cb89-12"></a><span class="co">#&gt; 5 Afghanistan Asia       1972    36.1 13079460      740.  9678553274.    23.0</span></span>
<span id="cb89-13"><a href="data-transformation.html#cb89-13"></a><span class="co">#&gt; 6 Afghanistan Asia       1977    38.4 14880372      786. 11697659231.    23.2</span></span></code></pre></div>
</div>
<div id="use-arrange-to-row-order-data-in-a-principled-way" class="section level3">
<h3><span class="header-section-number">9.3.2</span> Use <code>arrange()</code> to Row-order Data in a Principled Way</h3>
<p><code>arrange()</code> reorders the rows in a data frame. Imagine you wanted this data ordered by year then country, as opposed to by country then year.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="data-transformation.html#cb90-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb90-2"><a href="data-transformation.html#cb90-2"></a><span class="st">  </span><span class="kw">arrange</span>(year, country)</span>
<span id="cb90-3"><a href="data-transformation.html#cb90-3"></a><span class="co">#&gt; # A tibble: 1,704 x 6</span></span>
<span id="cb90-4"><a href="data-transformation.html#cb90-4"></a><span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb90-5"><a href="data-transformation.html#cb90-5"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb90-6"><a href="data-transformation.html#cb90-6"></a><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb90-7"><a href="data-transformation.html#cb90-7"></a><span class="co">#&gt; 2 Albania     Europe     1952    55.2  1282697     1601.</span></span>
<span id="cb90-8"><a href="data-transformation.html#cb90-8"></a><span class="co">#&gt; 3 Algeria     Africa     1952    43.1  9279525     2449.</span></span>
<span id="cb90-9"><a href="data-transformation.html#cb90-9"></a><span class="co">#&gt; 4 Angola      Africa     1952    30.0  4232095     3521.</span></span>
<span id="cb90-10"><a href="data-transformation.html#cb90-10"></a><span class="co">#&gt; 5 Argentina   Americas   1952    62.5 17876956     5911.</span></span>
<span id="cb90-11"><a href="data-transformation.html#cb90-11"></a><span class="co">#&gt; 6 Australia   Oceania    1952    69.1  8691212    10040.</span></span>
<span id="cb90-12"><a href="data-transformation.html#cb90-12"></a><span class="co">#&gt; # … with 1,698 more rows</span></span></code></pre></div>
<p>Or maybe you want just the data from 2007, sorted on life expectancy?</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data-transformation.html#cb91-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb91-2"><a href="data-transformation.html#cb91-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span></span>
<span id="cb91-3"><a href="data-transformation.html#cb91-3"></a><span class="st">  </span><span class="kw">arrange</span>(lifeExp)</span>
<span id="cb91-4"><a href="data-transformation.html#cb91-4"></a><span class="co">#&gt; # A tibble: 142 x 6</span></span>
<span id="cb91-5"><a href="data-transformation.html#cb91-5"></a><span class="co">#&gt;   country      continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb91-6"><a href="data-transformation.html#cb91-6"></a><span class="co">#&gt;   &lt;fct&gt;        &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb91-7"><a href="data-transformation.html#cb91-7"></a><span class="co">#&gt; 1 Swaziland    Africa     2007    39.6  1133066     4513.</span></span>
<span id="cb91-8"><a href="data-transformation.html#cb91-8"></a><span class="co">#&gt; 2 Mozambique   Africa     2007    42.1 19951656      824.</span></span>
<span id="cb91-9"><a href="data-transformation.html#cb91-9"></a><span class="co">#&gt; 3 Zambia       Africa     2007    42.4 11746035     1271.</span></span>
<span id="cb91-10"><a href="data-transformation.html#cb91-10"></a><span class="co">#&gt; 4 Sierra Leone Africa     2007    42.6  6144562      863.</span></span>
<span id="cb91-11"><a href="data-transformation.html#cb91-11"></a><span class="co">#&gt; 5 Lesotho      Africa     2007    42.6  2012649     1569.</span></span>
<span id="cb91-12"><a href="data-transformation.html#cb91-12"></a><span class="co">#&gt; 6 Angola       Africa     2007    42.7 12420476     4797.</span></span>
<span id="cb91-13"><a href="data-transformation.html#cb91-13"></a><span class="co">#&gt; # … with 136 more rows</span></span></code></pre></div>
<p>Oh, you would like to sort on life expectancy in <strong>desc</strong>ending order? Then use <code>desc()</code>.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-transformation.html#cb92-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb92-2"><a href="data-transformation.html#cb92-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span></span>
<span id="cb92-3"><a href="data-transformation.html#cb92-3"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(lifeExp))</span>
<span id="cb92-4"><a href="data-transformation.html#cb92-4"></a><span class="co">#&gt; # A tibble: 142 x 6</span></span>
<span id="cb92-5"><a href="data-transformation.html#cb92-5"></a><span class="co">#&gt;   country          continent  year lifeExp       pop gdpPercap</span></span>
<span id="cb92-6"><a href="data-transformation.html#cb92-6"></a><span class="co">#&gt;   &lt;fct&gt;            &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb92-7"><a href="data-transformation.html#cb92-7"></a><span class="co">#&gt; 1 Japan            Asia       2007    82.6 127467972    31656.</span></span>
<span id="cb92-8"><a href="data-transformation.html#cb92-8"></a><span class="co">#&gt; 2 Hong Kong, China Asia       2007    82.2   6980412    39725.</span></span>
<span id="cb92-9"><a href="data-transformation.html#cb92-9"></a><span class="co">#&gt; 3 Iceland          Europe     2007    81.8    301931    36181.</span></span>
<span id="cb92-10"><a href="data-transformation.html#cb92-10"></a><span class="co">#&gt; 4 Switzerland      Europe     2007    81.7   7554661    37506.</span></span>
<span id="cb92-11"><a href="data-transformation.html#cb92-11"></a><span class="co">#&gt; 5 Australia        Oceania    2007    81.2  20434176    34435.</span></span>
<span id="cb92-12"><a href="data-transformation.html#cb92-12"></a><span class="co">#&gt; 6 Spain            Europe     2007    80.9  40448191    28821.</span></span>
<span id="cb92-13"><a href="data-transformation.html#cb92-13"></a><span class="co">#&gt; # … with 136 more rows</span></span></code></pre></div>
<p>I advise that your analyses NEVER rely on rows or variables being in a specific order. But it is still true that human beings write the code, and the interactive development process can be much nicer if you reorder the rows of your data as you go along. Also, once you are preparing tables for human eyeballs, it is imperative that you step up and take control of row order.</p>
</div>
<div id="use-rename-to-rename-variables" class="section level3">
<h3><span class="header-section-number">9.3.3</span> Use <code>rename()</code> to Rename Variables</h3>
<p>When I first cleaned this Gapminder excerpt, I was a <code>camelCase</code> person, but now I am all about <code>snake_case</code>. So I am vexed by the variable names I chose when I cleaned this data years ago. Let’s rename some variables!</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-transformation.html#cb93-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb93-2"><a href="data-transformation.html#cb93-2"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">life_exp =</span> lifeExp,</span>
<span id="cb93-3"><a href="data-transformation.html#cb93-3"></a>         <span class="dt">gdp_percap =</span> gdpPercap)</span>
<span id="cb93-4"><a href="data-transformation.html#cb93-4"></a><span class="co">#&gt; # A tibble: 1,704 x 6</span></span>
<span id="cb93-5"><a href="data-transformation.html#cb93-5"></a><span class="co">#&gt;   country     continent  year life_exp      pop gdp_percap</span></span>
<span id="cb93-6"><a href="data-transformation.html#cb93-6"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt;    &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb93-7"><a href="data-transformation.html#cb93-7"></a><span class="co">#&gt; 1 Afghanistan Asia       1952     28.8  8425333       779.</span></span>
<span id="cb93-8"><a href="data-transformation.html#cb93-8"></a><span class="co">#&gt; 2 Afghanistan Asia       1957     30.3  9240934       821.</span></span>
<span id="cb93-9"><a href="data-transformation.html#cb93-9"></a><span class="co">#&gt; 3 Afghanistan Asia       1962     32.0 10267083       853.</span></span>
<span id="cb93-10"><a href="data-transformation.html#cb93-10"></a><span class="co">#&gt; 4 Afghanistan Asia       1967     34.0 11537966       836.</span></span>
<span id="cb93-11"><a href="data-transformation.html#cb93-11"></a><span class="co">#&gt; 5 Afghanistan Asia       1972     36.1 13079460       740.</span></span>
<span id="cb93-12"><a href="data-transformation.html#cb93-12"></a><span class="co">#&gt; 6 Afghanistan Asia       1977     38.4 14880372       786.</span></span>
<span id="cb93-13"><a href="data-transformation.html#cb93-13"></a><span class="co">#&gt; # … with 1,698 more rows</span></span></code></pre></div>
</div>
<div id="use-select-to-rename-and-reposition-variables" class="section level3">
<h3><span class="header-section-number">9.3.4</span> Use <code>select()</code> to Rename and Reposition Variables</h3>
<p>You have seen the simple use of <code>select()</code>. There are two tricks you might enjoy:</p>
<ol style="list-style-type: decimal">
<li><code>select()</code> can rename the variables you request to keep.</li>
<li><code>select()</code> can be used with <code>everything()</code> to hoist a variable up to the front of the tibble.</li>
</ol>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data-transformation.html#cb94-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb94-2"><a href="data-transformation.html#cb94-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Burundi&quot;</span>, year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1996</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb94-3"><a href="data-transformation.html#cb94-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="dt">yr =</span> year, lifeExp, gdpPercap) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb94-4"><a href="data-transformation.html#cb94-4"></a><span class="st">  </span><span class="kw">select</span>(gdpPercap, <span class="kw">everything</span>())</span>
<span id="cb94-5"><a href="data-transformation.html#cb94-5"></a><span class="co">#&gt; # A tibble: 3 x 3</span></span>
<span id="cb94-6"><a href="data-transformation.html#cb94-6"></a><span class="co">#&gt;   gdpPercap    yr lifeExp</span></span>
<span id="cb94-7"><a href="data-transformation.html#cb94-7"></a><span class="co">#&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;</span></span>
<span id="cb94-8"><a href="data-transformation.html#cb94-8"></a><span class="co">#&gt; 1      463.  1997    45.3</span></span>
<span id="cb94-9"><a href="data-transformation.html#cb94-9"></a><span class="co">#&gt; 2      446.  2002    47.4</span></span>
<span id="cb94-10"><a href="data-transformation.html#cb94-10"></a><span class="co">#&gt; 3      430.  2007    49.6</span></span></code></pre></div>
<p><code>everything()</code> is one of several helpers for variable selection. Read its help to see the rest.</p>
</div>
<div id="use-count-to-count-variable-quantities" class="section level3">
<h3><span class="header-section-number">9.3.5</span> Use <code>count()</code> to Count Variable Quantities</h3>
<p>Finally, let’s say we want to examine if the number of countries covered in the Gapminder dataset varies between years. We can use <code>count()</code> to count the number of observations within a set of parameters we choose.</p>
<p>Below, we will specify that we want to <code>count()</code> the number of observations in each year of the dataset:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="data-transformation.html#cb95-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb95-2"><a href="data-transformation.html#cb95-2"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">count</span>(year)</span>
<span id="cb95-3"><a href="data-transformation.html#cb95-3"></a><span class="co">#&gt; # A tibble: 12 x 2</span></span>
<span id="cb95-4"><a href="data-transformation.html#cb95-4"></a><span class="co">#&gt;    year     n</span></span>
<span id="cb95-5"><a href="data-transformation.html#cb95-5"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb95-6"><a href="data-transformation.html#cb95-6"></a><span class="co">#&gt; 1  1952   142</span></span>
<span id="cb95-7"><a href="data-transformation.html#cb95-7"></a><span class="co">#&gt; 2  1957   142</span></span>
<span id="cb95-8"><a href="data-transformation.html#cb95-8"></a><span class="co">#&gt; 3  1962   142</span></span>
<span id="cb95-9"><a href="data-transformation.html#cb95-9"></a><span class="co">#&gt; 4  1967   142</span></span>
<span id="cb95-10"><a href="data-transformation.html#cb95-10"></a><span class="co">#&gt; 5  1972   142</span></span>
<span id="cb95-11"><a href="data-transformation.html#cb95-11"></a><span class="co">#&gt; 6  1977   142</span></span>
<span id="cb95-12"><a href="data-transformation.html#cb95-12"></a><span class="co">#&gt; # … with 6 more rows</span></span></code></pre></div>
<p>We can confirm that each year in the dataset contains the same number of observations. We can use similar syntax to answer other questions: For example, how many countries in each year have a GDP that is greater than $10,000 per capita?</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="data-transformation.html#cb96-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb96-2"><a href="data-transformation.html#cb96-2"></a><span class="st">  </span><span class="kw">filter</span>(gdpPercap <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10000</span>) <span class="op">%&gt;%</span></span>
<span id="cb96-3"><a href="data-transformation.html#cb96-3"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">count</span>(year) </span>
<span id="cb96-4"><a href="data-transformation.html#cb96-4"></a><span class="co">#&gt; # A tibble: 12 x 2</span></span>
<span id="cb96-5"><a href="data-transformation.html#cb96-5"></a><span class="co">#&gt;    year     n</span></span>
<span id="cb96-6"><a href="data-transformation.html#cb96-6"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb96-7"><a href="data-transformation.html#cb96-7"></a><span class="co">#&gt; 1  1952     7</span></span>
<span id="cb96-8"><a href="data-transformation.html#cb96-8"></a><span class="co">#&gt; 2  1957    12</span></span>
<span id="cb96-9"><a href="data-transformation.html#cb96-9"></a><span class="co">#&gt; 3  1962    19</span></span>
<span id="cb96-10"><a href="data-transformation.html#cb96-10"></a><span class="co">#&gt; 4  1967    22</span></span>
<span id="cb96-11"><a href="data-transformation.html#cb96-11"></a><span class="co">#&gt; 5  1972    32</span></span>
<span id="cb96-12"><a href="data-transformation.html#cb96-12"></a><span class="co">#&gt; 6  1977    41</span></span>
<span id="cb96-13"><a href="data-transformation.html#cb96-13"></a><span class="co">#&gt; # … with 6 more rows</span></span></code></pre></div>

<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data-transformation.html#cb97-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb97-2"><a href="data-transformation.html#cb97-2"></a><span class="kw">library</span>(gapminder)</span>
<span id="cb97-3"><a href="data-transformation.html#cb97-3"></a></span>
<span id="cb97-4"><a href="data-transformation.html#cb97-4"></a>gap &lt;-<span class="st"> </span>gapminder</span>
<span id="cb97-5"><a href="data-transformation.html#cb97-5"></a><span class="kw">head</span>(gap)</span>
<span id="cb97-6"><a href="data-transformation.html#cb97-6"></a><span class="co">#&gt; # A tibble: 6 x 6</span></span>
<span id="cb97-7"><a href="data-transformation.html#cb97-7"></a><span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb97-8"><a href="data-transformation.html#cb97-8"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb97-9"><a href="data-transformation.html#cb97-9"></a><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb97-10"><a href="data-transformation.html#cb97-10"></a><span class="co">#&gt; 2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb97-11"><a href="data-transformation.html#cb97-11"></a><span class="co">#&gt; 3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb97-12"><a href="data-transformation.html#cb97-12"></a><span class="co">#&gt; 4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb97-13"><a href="data-transformation.html#cb97-13"></a><span class="co">#&gt; 5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb97-14"><a href="data-transformation.html#cb97-14"></a><span class="co">#&gt; 6 Afghanistan Asia       1977    38.4 14880372      786.</span></span></code></pre></div>
</div>
</div>
<div id="calculating-across-groups" class="section level2">
<h2><span class="header-section-number">9.4</span> Calculating across Groups</h2>
<p>A common task you will encounter when working with data is running calculations on different groups within the data. For instance, what if we wanted to calculate the mean GDP per capita for each continent?</p>
<p>In base R, you would have to run the <code>mean()</code> function for each subset of data.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="data-transformation.html#cb98-1"></a><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>])</span>
<span id="cb98-2"><a href="data-transformation.html#cb98-2"></a><span class="co">#&gt; [1] 2194</span></span>
<span id="cb98-3"><a href="data-transformation.html#cb98-3"></a><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Americas&quot;</span>])</span>
<span id="cb98-4"><a href="data-transformation.html#cb98-4"></a><span class="co">#&gt; [1] 7136</span></span>
<span id="cb98-5"><a href="data-transformation.html#cb98-5"></a><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Asia&quot;</span>])</span>
<span id="cb98-6"><a href="data-transformation.html#cb98-6"></a><span class="co">#&gt; [1] 7902</span></span>
<span id="cb98-7"><a href="data-transformation.html#cb98-7"></a><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>])</span>
<span id="cb98-8"><a href="data-transformation.html#cb98-8"></a><span class="co">#&gt; [1] 14469</span></span>
<span id="cb98-9"><a href="data-transformation.html#cb98-9"></a><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Oceania&quot;</span>])</span>
<span id="cb98-10"><a href="data-transformation.html#cb98-10"></a><span class="co">#&gt; [1] 18622</span></span></code></pre></div>
<p>That is a lot of repetition! To make matters worse, what if we wanted to add these values to our original data frame as a new column? We would have to write something like this:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="data-transformation.html#cb99-1"></a>gap<span class="op">$</span>mean.continent.GDP &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb99-2"><a href="data-transformation.html#cb99-2"></a>gap<span class="op">$</span>mean.continent.GDP[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>] &lt;-<span class="st"> </span><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>])</span>
<span id="cb99-3"><a href="data-transformation.html#cb99-3"></a>gap<span class="op">$</span>mean.continent.GDP[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Americas&quot;</span>] &lt;-<span class="st"> </span><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Americas&quot;</span>])</span>
<span id="cb99-4"><a href="data-transformation.html#cb99-4"></a>gap<span class="op">$</span>mean.continent.GDP[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Asia&quot;</span>] &lt;-<span class="st"> </span><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Asia&quot;</span>])</span>
<span id="cb99-5"><a href="data-transformation.html#cb99-5"></a>gap<span class="op">$</span>mean.continent.GDP[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>] &lt;-<span class="st"> </span><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>])</span>
<span id="cb99-6"><a href="data-transformation.html#cb99-6"></a>gap<span class="op">$</span>mean.continent.GDP[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Oceania&quot;</span>] &lt;-<span class="st"> </span><span class="kw">mean</span>(gap<span class="op">$</span>gdpPercap[gap<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Oceania&quot;</span>])</span></code></pre></div>
<p>You can see how this can get pretty tedious, especially if we want to calculate more complicated or refined statistics. We could use loops or apply functions, but these can be difficult, slow, and error-prone.</p>
<div id="split-apply-combine" class="section level4 unnumbered">
<h4>Split-apply-combine</h4>
<p>The abstract problem we are encountering here is know as “split-apply-combine”:</p>
<p><img src="img/splitapply.png" width="70%" style="display: block; margin: auto;" /></p>
<p>We want to <em>split</em> our data into groups (in this case, continents), <em>apply</em> some calculations on that group, then <em>combine</em> the results together afterwards.</p>
<p>Luckily, <code>dplyr</code> offers a much cleaner, straight-forward solution to this problem.</p>
<p>First, let’s remove the column we just made:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="data-transformation.html#cb100-1"></a>gap &lt;-<span class="st"> </span>gapminder</span></code></pre></div>
</div>
<div id="use-group_by-to-create-a-grouped-data" class="section level3">
<h3><span class="header-section-number">9.4.1</span> Use <code>group_by</code> to Create a Grouped Data</h3>
<p>We have already seen how <code>filter()</code> can help us select observations that meet certain criteria (in the above: <code>continent == "Africa"</code>). More helpful, however, is the <code>group_by()</code> function, which will essentially use every unique criterium that we could have used in <code>filter()</code>.</p>
<p>A <code>grouped_df</code> can be thought of as a <code>list</code> where each item in the <code>list</code> is a <code>data.frame</code> which contains only the rows that correspond to a particular value for <code>continent</code> (at least in the example above).</p>
<p><img src="img/dplyr-fig2.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="summarize-across-groups-with-summarize" class="section level3">
<h3><span class="header-section-number">9.4.2</span> Summarize Across Groups with <code>summarize</code></h3>
<p><code>group_by()</code> on its own is not particularly interesting. It is much more exciting used in conjunction with the <code>summarize()</code> function.</p>
<p>This will allow us to create new variable(s) by applying transformations to variables in each of our groups (continent-specific data frames).</p>
<p>In other words, using the <code>group_by()</code> function, we split our original data frame into multiple pieces, to which we then apply summary functions (e.g., <code>mean()</code> or <code>sd()</code>) within <code>summarize()</code>.</p>
<p>The output is a new data frame reduced in size, with one row per group.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="data-transformation.html#cb101-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb101-2"><a href="data-transformation.html#cb101-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span></span>
<span id="cb101-3"><a href="data-transformation.html#cb101-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_gdpPercap =</span> <span class="kw">mean</span>(gdpPercap)) </span>
<span id="cb101-4"><a href="data-transformation.html#cb101-4"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb101-5"><a href="data-transformation.html#cb101-5"></a><span class="co">#&gt; # A tibble: 5 x 2</span></span>
<span id="cb101-6"><a href="data-transformation.html#cb101-6"></a><span class="co">#&gt;   continent mean_gdpPercap</span></span>
<span id="cb101-7"><a href="data-transformation.html#cb101-7"></a><span class="co">#&gt;   &lt;fct&gt;              &lt;dbl&gt;</span></span>
<span id="cb101-8"><a href="data-transformation.html#cb101-8"></a><span class="co">#&gt; 1 Africa             2194.</span></span>
<span id="cb101-9"><a href="data-transformation.html#cb101-9"></a><span class="co">#&gt; 2 Americas           7136.</span></span>
<span id="cb101-10"><a href="data-transformation.html#cb101-10"></a><span class="co">#&gt; 3 Asia               7902.</span></span>
<span id="cb101-11"><a href="data-transformation.html#cb101-11"></a><span class="co">#&gt; 4 Europe            14469.</span></span>
<span id="cb101-12"><a href="data-transformation.html#cb101-12"></a><span class="co">#&gt; 5 Oceania           18622.</span></span></code></pre></div>
<p><img src="img/dplyr-fig3.png" width="70%" style="display: block; margin: auto;" /></p>
<p>That allowed us to calculate the mean <code>gdpPercap</code> for each continent.</p>
<p>But it gets even better – the function <code>group_by()</code> allows us to group by multiple variables. Let’s group by <code>year</code> and <code>continent</code>:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="data-transformation.html#cb102-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb102-2"><a href="data-transformation.html#cb102-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent, year) <span class="op">%&gt;%</span></span>
<span id="cb102-3"><a href="data-transformation.html#cb102-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_gdpPercap =</span> <span class="kw">mean</span>(gdpPercap)) <span class="op">%&gt;%</span></span>
<span id="cb102-4"><a href="data-transformation.html#cb102-4"></a><span class="st">  </span><span class="kw">head</span>()</span>
<span id="cb102-5"><a href="data-transformation.html#cb102-5"></a><span class="co">#&gt; `summarise()` regrouping output by &#39;continent&#39; (override with `.groups` argument)</span></span>
<span id="cb102-6"><a href="data-transformation.html#cb102-6"></a><span class="co">#&gt; # A tibble: 6 x 3</span></span>
<span id="cb102-7"><a href="data-transformation.html#cb102-7"></a><span class="co">#&gt; # Groups:   continent [1]</span></span>
<span id="cb102-8"><a href="data-transformation.html#cb102-8"></a><span class="co">#&gt;   continent  year mean_gdpPercap</span></span>
<span id="cb102-9"><a href="data-transformation.html#cb102-9"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;          &lt;dbl&gt;</span></span>
<span id="cb102-10"><a href="data-transformation.html#cb102-10"></a><span class="co">#&gt; 1 Africa     1952          1253.</span></span>
<span id="cb102-11"><a href="data-transformation.html#cb102-11"></a><span class="co">#&gt; 2 Africa     1957          1385.</span></span>
<span id="cb102-12"><a href="data-transformation.html#cb102-12"></a><span class="co">#&gt; 3 Africa     1962          1598.</span></span>
<span id="cb102-13"><a href="data-transformation.html#cb102-13"></a><span class="co">#&gt; 4 Africa     1967          2050.</span></span>
<span id="cb102-14"><a href="data-transformation.html#cb102-14"></a><span class="co">#&gt; 5 Africa     1972          2340.</span></span>
<span id="cb102-15"><a href="data-transformation.html#cb102-15"></a><span class="co">#&gt; 6 Africa     1977          2586.</span></span></code></pre></div>
<p>That is already quite powerful, but it gets even better! You are not limited to defining only one new variable in <code>summarize()</code>.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data-transformation.html#cb103-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb103-2"><a href="data-transformation.html#cb103-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent, year) <span class="op">%&gt;%</span></span>
<span id="cb103-3"><a href="data-transformation.html#cb103-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_gdpPercap =</span> <span class="kw">mean</span>(gdpPercap), </span>
<span id="cb103-4"><a href="data-transformation.html#cb103-4"></a>            <span class="dt">sd_gdpPercap =</span> <span class="kw">sd</span>(gdpPercap),</span>
<span id="cb103-5"><a href="data-transformation.html#cb103-5"></a>            <span class="dt">mean_pop =</span> <span class="kw">mean</span>(pop),</span>
<span id="cb103-6"><a href="data-transformation.html#cb103-6"></a>            <span class="dt">sd_pop =</span> <span class="kw">sd</span>(pop))</span>
<span id="cb103-7"><a href="data-transformation.html#cb103-7"></a><span class="co">#&gt; `summarise()` regrouping output by &#39;continent&#39; (override with `.groups` argument)</span></span>
<span id="cb103-8"><a href="data-transformation.html#cb103-8"></a><span class="co">#&gt; # A tibble: 60 x 6</span></span>
<span id="cb103-9"><a href="data-transformation.html#cb103-9"></a><span class="co">#&gt; # Groups:   continent [5]</span></span>
<span id="cb103-10"><a href="data-transformation.html#cb103-10"></a><span class="co">#&gt;   continent  year mean_gdpPercap sd_gdpPercap mean_pop    sd_pop</span></span>
<span id="cb103-11"><a href="data-transformation.html#cb103-11"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;          &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb103-12"><a href="data-transformation.html#cb103-12"></a><span class="co">#&gt; 1 Africa     1952          1253.         983. 4570010.  6317450.</span></span>
<span id="cb103-13"><a href="data-transformation.html#cb103-13"></a><span class="co">#&gt; 2 Africa     1957          1385.        1135. 5093033.  7076042.</span></span>
<span id="cb103-14"><a href="data-transformation.html#cb103-14"></a><span class="co">#&gt; 3 Africa     1962          1598.        1462. 5702247.  7957545.</span></span>
<span id="cb103-15"><a href="data-transformation.html#cb103-15"></a><span class="co">#&gt; 4 Africa     1967          2050.        2848. 6447875.  8985505.</span></span>
<span id="cb103-16"><a href="data-transformation.html#cb103-16"></a><span class="co">#&gt; 5 Africa     1972          2340.        3287. 7305376. 10130833.</span></span>
<span id="cb103-17"><a href="data-transformation.html#cb103-17"></a><span class="co">#&gt; 6 Africa     1977          2586.        4142. 8328097. 11585184.</span></span>
<span id="cb103-18"><a href="data-transformation.html#cb103-18"></a><span class="co">#&gt; # … with 54 more rows</span></span></code></pre></div>
</div>
<div id="add-new-variables-with-mutate" class="section level3">
<h3><span class="header-section-number">9.4.3</span> Add New Variables with <code>mutate</code></h3>
<p>What if we wanted to add these values to our original data frame instead of creating a new object?</p>
<p>For this, we can use the <code>mutate()</code> function, which is similar to <code>summarize()</code> except that it creates new variables in the same data frame that you pass into it.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="data-transformation.html#cb104-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb104-2"><a href="data-transformation.html#cb104-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent, year) <span class="op">%&gt;%</span></span>
<span id="cb104-3"><a href="data-transformation.html#cb104-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mean_gdpPercap =</span> <span class="kw">mean</span>(gdpPercap), </span>
<span id="cb104-4"><a href="data-transformation.html#cb104-4"></a>            <span class="dt">sd_gdpPercap =</span> <span class="kw">sd</span>(gdpPercap),</span>
<span id="cb104-5"><a href="data-transformation.html#cb104-5"></a>            <span class="dt">mean_pop =</span> <span class="kw">mean</span>(pop),</span>
<span id="cb104-6"><a href="data-transformation.html#cb104-6"></a>            <span class="dt">sd_pop =</span> <span class="kw">sd</span>(pop))</span>
<span id="cb104-7"><a href="data-transformation.html#cb104-7"></a><span class="co">#&gt; # A tibble: 1,704 x 10</span></span>
<span id="cb104-8"><a href="data-transformation.html#cb104-8"></a><span class="co">#&gt; # Groups:   continent, year [60]</span></span>
<span id="cb104-9"><a href="data-transformation.html#cb104-9"></a><span class="co">#&gt;   country continent  year lifeExp    pop gdpPercap mean_gdpPercap sd_gdpPercap</span></span>
<span id="cb104-10"><a href="data-transformation.html#cb104-10"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb104-11"><a href="data-transformation.html#cb104-11"></a><span class="co">#&gt; 1 Afghan… Asia       1952    28.8 8.43e6      779.          5195.       18635.</span></span>
<span id="cb104-12"><a href="data-transformation.html#cb104-12"></a><span class="co">#&gt; 2 Afghan… Asia       1957    30.3 9.24e6      821.          5788.       19507.</span></span>
<span id="cb104-13"><a href="data-transformation.html#cb104-13"></a><span class="co">#&gt; 3 Afghan… Asia       1962    32.0 1.03e7      853.          5729.       16416.</span></span>
<span id="cb104-14"><a href="data-transformation.html#cb104-14"></a><span class="co">#&gt; 4 Afghan… Asia       1967    34.0 1.15e7      836.          5971.       14063.</span></span>
<span id="cb104-15"><a href="data-transformation.html#cb104-15"></a><span class="co">#&gt; 5 Afghan… Asia       1972    36.1 1.31e7      740.          8187.       19088.</span></span>
<span id="cb104-16"><a href="data-transformation.html#cb104-16"></a><span class="co">#&gt; 6 Afghan… Asia       1977    38.4 1.49e7      786.          7791.       11816.</span></span>
<span id="cb104-17"><a href="data-transformation.html#cb104-17"></a><span class="co">#&gt; # … with 1,698 more rows, and 2 more variables: mean_pop &lt;dbl&gt;, sd_pop &lt;dbl&gt;</span></span></code></pre></div>
<p>We can also use <code>mutate()</code> to create new variables prior to (or even after) summarizing the information.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="data-transformation.html#cb105-1"></a>gap <span class="op">%&gt;%</span></span>
<span id="cb105-2"><a href="data-transformation.html#cb105-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp_billion =</span> gdpPercap<span class="op">*</span>pop<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">9</span>) <span class="op">%&gt;%</span></span>
<span id="cb105-3"><a href="data-transformation.html#cb105-3"></a><span class="st">  </span><span class="kw">group_by</span>(continent, year) <span class="op">%&gt;%</span></span>
<span id="cb105-4"><a href="data-transformation.html#cb105-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_gdpPercap =</span> <span class="kw">mean</span>(gdpPercap),</span>
<span id="cb105-5"><a href="data-transformation.html#cb105-5"></a>            <span class="dt">sd_gdpPercap =</span> <span class="kw">sd</span>(gdpPercap),</span>
<span id="cb105-6"><a href="data-transformation.html#cb105-6"></a>            <span class="dt">mean_pop =</span> <span class="kw">mean</span>(pop),</span>
<span id="cb105-7"><a href="data-transformation.html#cb105-7"></a>            <span class="dt">sd_pop =</span> <span class="kw">sd</span>(pop),</span>
<span id="cb105-8"><a href="data-transformation.html#cb105-8"></a>            <span class="dt">mean_gdp_billion =</span> <span class="kw">mean</span>(gdp_billion),</span>
<span id="cb105-9"><a href="data-transformation.html#cb105-9"></a>            <span class="dt">sd_gdp_billion =</span> <span class="kw">sd</span>(gdp_billion))</span>
<span id="cb105-10"><a href="data-transformation.html#cb105-10"></a><span class="co">#&gt; `summarise()` regrouping output by &#39;continent&#39; (override with `.groups` argument)</span></span>
<span id="cb105-11"><a href="data-transformation.html#cb105-11"></a><span class="co">#&gt; # A tibble: 60 x 8</span></span>
<span id="cb105-12"><a href="data-transformation.html#cb105-12"></a><span class="co">#&gt; # Groups:   continent [5]</span></span>
<span id="cb105-13"><a href="data-transformation.html#cb105-13"></a><span class="co">#&gt;   continent  year mean_gdpPercap sd_gdpPercap mean_pop sd_pop mean_gdp_billion</span></span>
<span id="cb105-14"><a href="data-transformation.html#cb105-14"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;          &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb105-15"><a href="data-transformation.html#cb105-15"></a><span class="co">#&gt; 1 Africa     1952          1253.         983. 4570010. 6.32e6             5.99</span></span>
<span id="cb105-16"><a href="data-transformation.html#cb105-16"></a><span class="co">#&gt; 2 Africa     1957          1385.        1135. 5093033. 7.08e6             7.36</span></span>
<span id="cb105-17"><a href="data-transformation.html#cb105-17"></a><span class="co">#&gt; 3 Africa     1962          1598.        1462. 5702247. 7.96e6             8.78</span></span>
<span id="cb105-18"><a href="data-transformation.html#cb105-18"></a><span class="co">#&gt; 4 Africa     1967          2050.        2848. 6447875. 8.99e6            11.4 </span></span>
<span id="cb105-19"><a href="data-transformation.html#cb105-19"></a><span class="co">#&gt; 5 Africa     1972          2340.        3287. 7305376. 1.01e7            15.1 </span></span>
<span id="cb105-20"><a href="data-transformation.html#cb105-20"></a><span class="co">#&gt; 6 Africa     1977          2586.        4142. 8328097. 1.16e7            18.7 </span></span>
<span id="cb105-21"><a href="data-transformation.html#cb105-21"></a><span class="co">#&gt; # … with 54 more rows, and 1 more variable: sd_gdp_billion &lt;dbl&gt;</span></span></code></pre></div>
<div id="mutate-vs.-summarize" class="section level4 unnumbered">
<h4><code>mutate</code> vs. <code>summarize</code></h4>
<p>It can be confusing to decide whether to use <code>mutate</code> or <code>summarize</code>. The key distinction is whether you want the output to have one row for each group or one row for each row in the original data frame:</p>
<ul>
<li><code>mutate</code>: Creates new columns with as many rows as the original data frame.</li>
<li><code>summarize</code>: Creates a data frame with as many rows as groups.</li>
</ul>
<p>Note that if you use an aggregation function such as <code>mean()</code> within <code>mutate()</code> without using <code>group_by()</code>, you will simply do the summary over all the rows of the input data frame.</p>
<p>And if you use an aggregation function such as <code>mean()</code> within <code>summarize()</code> without using <code>group_by()</code>, you will simply create an output data frame with one row (i.e., the whole input data frame is a single group).</p>
</div>
</div>
</div>
<div id="challenges-6" class="section level2">
<h2><span class="header-section-number">9.5</span> Challenges</h2>
<div id="challenge-1.-3" class="section level4 unnumbered">
<h4>Challenge 1.</h4>
<p>Use <code>dplyr</code> to create a data frame containing the median <code>lifeExp</code> for each continent.</p>
</div>
<div id="challenge-2.-2" class="section level4 unnumbered">
<h4>Challenge 2.</h4>
<p>Use <code>dplyr</code> to add a column to the Gapminder dataset that contains the total population of the continent of each observation in a given year. For example, if the first observation is Afghanistan in 1952, the new column would contain the population of Asia in 1952.</p>
</div>
<div id="challenge-3.-2" class="section level4 unnumbered">
<h4>Challenge 3.</h4>
<p>Use <code>dplyr</code> to: (a) add a column called <code>gdpPercap_diff</code> that contains the difference between the observation’s <code>gdpPercap</code> and the mean <code>gdpPercap</code> of the continent in that year, and (b) arrange the data frame by the column you just created in descending order (so that the relatively richest country-years are listed first).</p>
</div>
<div id="acknowledgments-2" class="section level4 unnumbered">
<h4>Acknowledgments</h4>
<p>Some of the materials in this module were adapted from:</p>
<ul>
<li><a href="http://swcarpentry.github.io/r-novice-gapminder/">Software Carpentry</a>.</li>
<li><a href="https://github.com/berkeley-scf/r-bootcamp-fall-2019">R bootcamp at UC Berkeley</a>.</li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidying-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/plsc-31101/course/edit/master/05-Data_Transformation/05_1-Data_Basics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["https://github.com/plsc-31101/course/raw/master/05-Data_Transformation/05_1-Data_Basics.Rmd"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
